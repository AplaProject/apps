{
    "name": "Ecosystems catalog",
    "conditions": "ContractConditions(\"@1DeveloperCondition\")",
    "data": [
        {
            "Name": "default_menu",
            "Conditions": "ContractConditions(\"@1DeveloperCondition\")",
            "Value": "If(#ecosystem_id# == 1){\r\n    MenuItem(Title:$@1catalog_ecosystems$, Page:@1ec_list, Icon:\"icon-folder\")\r\n}",
            "Type": "menu"
        },
        {
            "Name": "ec_payment",
            "Conditions": "ContractConditions(\"@1DeveloperCondition\")",
            "Value": "@1apla_not_required,@1apla_required",
            "Type": "app_params"
        },
        {
            "Name": "ec_type",
            "Conditions": "ContractConditions(\"@1DeveloperCondition\")",
            "Value": "@1public_org,@1business,@1finance",
            "Type": "app_params"
        },
        {
            "Name": "ec_visibility",
            "Conditions": "ContractConditions(\"@1DeveloperCondition\")",
            "Value": "@1hide,@1show",
            "Type": "app_params"
        },
        {
            "Name": "ec_filter",
            "Conditions": "ContractConditions(\"@1DeveloperCondition\")",
            "Value": "DBFind(@1applications).Where({ecosystem:1, name:\"Ecosystems catalog\"}).Columns(\"name,id\").Vars(application)\r\nAppParam(Ecosystem: 1, App: #application_id#, Name: ec_type, Source: src_type)\r\nAppParam(Ecosystem: 1, App: #application_id#, Name: ec_payment, Source: src_payment)\r\n\r\nForm(){\r\n    Div(row){\r\n        Div(col-sm-6){\r\n            Div(pull-right){\r\n                Label(Class: m0){\r\n                    Span(Body: LangRes(@1catalog_ecosystems_type))\r\n                }\r\n                RadioGroup(Name: Type, Source: src_type, NameColumn: name, ValueColumn: id, Value: #page_par#)\r\n            }\r\n        }\r\n        Div(col-sm-6){\r\n            Label(Class: m0){\r\n                Span(Body: LangRes(@1catalog_ecosystems_payment))\r\n            }\r\n            RadioGroup(Name: Payment, Source: src_payment, NameColumn: name, ValueColumn: id, Value: #sort#)\r\n        }\r\n    }\r\n    If(GetVar(search)==\"\"){\r\n        SetVar(search,)\r\n    }\r\n    Button(Body: LangRes(@1filter), Class: btn btn-primary pull-right, Page: @1ec_list, PageParams: \"sort=Val(Payment),page_par=Val(Type),search=#search#\")\r\n    Button(Body: LangRes(@1clear), Class: btn btn-default pull-right, Page: @1ec_list, PageParams: \"sort=0,page_par=0,search=#search#\")\r\n}",
            "Menu": "default_menu",
            "Type": "pages"
        },
        {
            "Name": "ec_list",
            "Conditions": "ContractConditions(\"@1DeveloperCondition\")",
            "Value": "SetVar(this_page, @1ec_list).(this_table, @1ecosystems)\r\nInclude(@1pager_header)\r\n\r\nSetTitle(\"$@1catalog_ecosystems$\")\r\nSpan(Class: text-muted h5 m0 mb ml-lg, Body: Span(Class: ml-sm, Body: \"$@1catalog_ecosystems_desc$\"))\r\nIf(GetVar(EcosystemId) == \"\"){\r\n    SetVar(EcosystemId, #ecosystem_id#)\r\n}\r\nAddToolButton(Title: $@1catalog_ecosystems_manage_button$, Page: @1select_ecosystem, Icon: \"icon-settings\", PageParams: \"back_page=@1ec_manage,back_header=$@1catalog_ecosystems_editing$,EcosystemId=#EcosystemId#,Type=ONLY_MY\").Popup(Header: $@1ecosystem_select$, Width: \"30\")\r\nAddToolButton(Title: $@1create$, Page: @1ecosystem_new, Icon: icon-plus).Popup(Header: $@1create$, Width: \"30\")\r\n\r\nIf(GetVar(sort)){\r\n    If(#sort#==1){\r\n        SetVar(payment_filter, {\"info->payment\":1})\r\n    }.ElseIf(#sort#==2){\r\n        SetVar(payment_filter, {\"info->payment\":2})\r\n    }\r\n}.Else{\r\n    SetVar(sort, \"0\")\r\n}\r\n\r\nIf(GetVar(page_par)){\r\n    If(#page_par#==1){\r\n        SetVar(type_filter, {\"info->type\":1})\r\n    }.ElseIf(#page_par#==2){\r\n        SetVar(type_filter, {\"info->type\":2})\r\n    }.ElseIf(#page_par#==3){\r\n        SetVar(type_filter, {\"info->type\":3})\r\n    }\r\n}.Else{\r\n    SetVar(page_par, \"0\")\r\n}\r\n\r\nIf(GetVar(search)!=\"\"){\r\n    SetVar(where, {$and: [{\"info->visibility\": 2}, GetVar(payment_filter), GetVar(type_filter), {\"name\": {$like:#search#}}]})\r\n}.Else{\r\n    SetVar(where, {$and: [{\"info->visibility\": 2}, GetVar(payment_filter), GetVar(type_filter)]}).(search,)\r\n}\r\n\r\nDiv(mr-lg text-right){\r\n    Button(Page: @1ec_filter, Class: btn bg-gray-lighter mr-sm, PageParams: \"sort=#sort#,page_par=#page_par#,search=#search#,current_page=#current_page#\", Body: Em(Class: fa fa-filter) $@1filter$).Popup(Header: $@1filter$, Width: \"30\")\r\n    If(Or(#page_par#>0,#sort#>0)){\r\n        Button(Page: #this_page#, PageParams: \"sort=0,page_par=0,search=#search#\", Class: btn bg-gray-lighter mr-sm, Body: Em(Class: fa fa-close))\r\n    }\r\n}.Style(margin-top: -28px; z-index: 1001;)\r\n\r\nDiv(list-group-item ml-lg mr-lg pt-lg){\r\n    SetVar(search_name, LangRes(@1ecosystem))\r\n    Include(@1search)\r\n}\r\n\r\nDBFind(@1applications).Where({ecosystem:1, name:\"Ecosystems catalog\"}).Columns(\"name,id\").Vars(application)\r\n\r\nDBFind(#this_table#, src).Where(#where#).Order({\"id\": 1}).Limit(#pager_limit#).Offset(#pager_offset#).Columns(\"id,name,info->type,info->payment,info->logo\").Custom(name_link){\r\n\r\n    Button(Class: btn-xs btn-link, Page: @1ec_preview, PageParams: \"view_page_id=#id#,sort=#sort#,page_par=#page_par#,search=#search#,current_page=#current_page#\"){\r\n        If(#info.logo#>0){\r\n            Image(Src: Binary().ById(#info.logo#)).Style(height: 30px; margin-right: 10px;)\r\n            Span(Class: h5, Body: #name#)\r\n        }.Else{\r\n            Div(){\r\n                Span(Class: fa icon-layers fa-2x text-default).Style(margin-right:10px;)\r\n                Span(Class: h5, Body: #name#)\r\n            }.Style(display:flex; align-items:center;)\r\n        }\r\n    }.Popup(Header: $@1catalog_ecosystems_preview$, Width: \"40\")\r\n}.Custom(type){\r\n    If(#info.type#==1){\r\n        Em(Class: fa fa-lg fa-users fa-fw mr-sm)\r\n    }.ElseIf(#info.type#==2){\r\n        Em(Class: fa fa-lg fa-handshake-o fa-fw mr-sm)\r\n    }.ElseIf(#info.type#==3){\r\n        Em(Class: fa fa-lg fa-bank fa-fw mr-sm)\r\n    }\r\n    AppParam(Ecosystem: 1, App: #application_id#, Name: ec_type, Index: #info.type#)\r\n}.Custom(payment){\r\n    If(#info.payment#==1){\r\n        Em(Class: fa fa-lg fa-gift fa-fw)\r\n    }.ElseIf(#info.payment#==2){\r\n        Em(Class: fa fa-lg fa-usd fa-fw)\r\n    }\r\n    AppParam(Ecosystem: 1, App: #application_id#, Name: ec_payment, Index: #info.payment#)\r\n}.Custom(actions){\r\n    SetVar(ecosystem_member_id,)\r\n    DBFind(@1notifications).Where({\"ecosystem\": #id#, \"sender->member_id\": #key_id#, \"page_params->ecosystem_id\": #id#, closed:0}).Count(notific_count)\r\n    DBFind(@1keys).Where({\"ecosystem\": #id#, \"id\": #key_id#}).Vars(ecosystem_member)\r\n    DBFind(@1parameters).Where({\"$and\": [{\"ecosystem\": #id#}, {\"$or\": [{\"$and\": [{\"name\": \"founder_account\"},{\"value\": #key_id#}]},{\"$and\": [{\"name\": \"delegate_account\"},{\"value\": #key_id#}]}]}]}).Count(access)\r\n    Div(text-right button-group text-nowrap){\r\n        If(GetVar(access)){\r\n            Button(Class: icon-settings btn btn-default mh-sm, Page: @1ec_manage, PageParams: \"edit_page_id=#id#\").Popup(Header: $@1catalog_ecosystems_editing$, Width: \"50\")\r\n        }.ElseIf(And(#notific_count#==0,#ecosystem_member_id#==\"\")){\r\n            Button(Class: btn btn-link, Body: $@1send_request$, Contract: @1MembershipRequest, Page: #this_page#, Params: \"ecosystem_num=#id#\")\r\n        }\r\n    }\r\n}.Count(count)\r\n\r\nDiv(fullscreen){\r\n    Div(table-responsive ml-lg mr-lg){\r\n        Div(list-group-item){\r\n            If(#count# > 0){\r\n                Table(src, \"$@1id$=id,$@1ecosystem$=name_link,$@1catalog_ecosystems_type$=type,$@1catalog_ecosystems_payment$=payment,=actions\")\r\n            }.Else{\r\n                Div(Class: text-center h4 text-muted, Body: \"$@1ecosystems$ $@1not_founded$\")\r\n            }                       \r\n        }.Style(\r\n            margin-top:-15px;\r\n            tbody > tr:nth-of-type(odd) {\r\n                background-color: #f8f9fc;\r\n            }\r\n        )\r\n    }\r\n}\r\nDiv(mt-sm ml-lg mr-sm mb-sm){\r\n    Include(@1pager)\r\n}",
            "Menu": "default_menu",
            "Type": "pages"
        },
        {
            "Name": "ec_manage",
            "Conditions": "ContractConditions(\"@1DeveloperCondition\")",
            "Value": "DBFind(@1applications).Where({ecosystem:1, name:\"Ecosystems catalog\"}).Columns(\"name,id\").Vars(application)\r\nIf(GetVar(EcosystemId) == \"\"){\r\n    SetVar(EcosystemId, #ecosystem_id#)\r\n}\r\nDBFind(@1buffer_data).Columns(\"value->id,value->visibility,value->type,value->payment,value->description,value->logo,value->switch,value->conditions,value->hardware,value->email,value->phone,value->vde_page,value->vde_form,value->web_page,value->web_form\").Where({\"ecosystem\": #ecosystem_id#, \"key\": \"ecosystem_catalog_manage_form\", \"member_id\": #key_id#}).Vars(buffer)\r\nIf(And(#buffered#==1,#buffer_value_id#>1)){\r\n    SetVar(edit_page_id,#buffer_value_id#)\r\n}\r\nIf(GetVar(edit_page_id)){\r\n    DBFind(@1ecosystems).Where({\"id\": #edit_page_id#}).Columns(\"id,name,info->visibility,info->type,info->payment,info->logo,info->description,info->conditions,info->email,info->phone,info->hardware,info->vde_page,info->vde_form,info->web_page,info->web_form\").Vars(edit)\r\n}.Else{\r\n    DBFind(@1ecosystems).Where({\"id\": #EcosystemId#}).Columns(\"id,name,info->visibility,info->type,info->payment,info->logo,info->description,info->conditions,info->email,info->phone,info->hardware,info->vde_page,info->vde_form,info->web_page,info->web_form\").Vars(edit)\r\n}\r\nIf(#buffered#==1){\r\n    SetVar(edit_info_visibility,#buffer_value_visibility#)\r\n    SetVar(edit_info_type,#buffer_value_type#)\r\n    SetVar(edit_info_payment,#buffer_value_payment#)\r\n    SetVar(edit_info_description,#buffer_value_description#)\r\n}\r\nIf(#uploaded#==1){\r\n    DBFind(@1buffer_data).Columns(\"value->binary_id\").Where({\"ecosystem\": #ecosystem_id#, \"key\": \"ecosystem_logo\", \"member_id\": #key_id#}).Vars(logo)\r\n    SetVar(edit_info_logo,#logo_value_binary_id#)\r\n}.ElseIf(#buffered#==1){\r\n    SetVar(edit_info_logo,#buffer_value_logo#)\r\n}\r\nIf(And(#buffered#==1,#buffer_value_switch#==\"true\")){\r\n    SetVar(edit_info_conditions,#buffer_value_conditions#)\r\n    SetVar(edit_info_hardware,#buffer_value_hardware#)\r\n    SetVar(edit_info_email,#buffer_value_email#)\r\n    SetVar(edit_info_phone,#buffer_value_phone#)\r\n    SetVar(edit_info_vde_page,#buffer_value_vde_page#)\r\n    SetVar(edit_info_vde_form,#buffer_value_vde_form#)\r\n    SetVar(edit_info_web_page,#buffer_value_web_page#)\r\n    SetVar(edit_info_web_form,#buffer_value_web_form#)\r\n}\r\nAppParam(Ecosystem: 1, App: #application_id#, Name: ec_visibility, Source: src_visibility)\r\nAppParam(Ecosystem: 1, App: #application_id#, Name: ec_type, Source: src_type)\r\nAppParam(Ecosystem: 1, App: #application_id#, Name: ec_payment, Source: src_payment)\r\n\r\nForm(){\r\n    Div(row){\r\n        Div(col-sm-4 mt-sm text-right){\r\n            Label(){\r\n                LangRes(@1ecosystem)\r\n            }\r\n            Span(Class: text-danger, Body:*)\r\n        }\r\n        Div(col-sm-8){\r\n            Input(Name: Id, Type: hidden, Value: #edit_id#)\r\n            If(GetVar(edit_page_id)){\r\n                Input(Name: Name, Value: #edit_name#, Disabled: true)\r\n            }.Else{\r\n                Div(input-group){\r\n                    If(#edit_id#==1){\r\n                        Input(Name: Name, Value: $@1ecosystem_select$, Disabled: true)\r\n                    }.Else{\r\n                        Input(Name: Name, Value: #edit_name#, Disabled: true)\r\n                    }\r\n                    Div(input-group-btn){\r\n                        Button(Body: LangRes(@1select), Page: @1select_ecosystem, PageParams: \"back_page=@1ec_manage,back_header=$@1catalog_ecosystems_editing$,EcosystemId=#EcosystemId#,Type=ONLY_MY\", Class:btn btn-primary).Popup(Header: $@1ecosystem_select$, Width: \"30\")\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    Div(row mt-sm){\r\n        Div(col-sm-4 mt-sm text-right){\r\n            Label(){\r\n                LangRes(@1catalog_ecosystems_visibility)\r\n            }\r\n            Span(Class: text-danger, Body:*)\r\n        }\r\n        Div(col-sm-8){\r\n            If(GetVar(edit_info_visibility)){\r\n                Select(Name: Visibility, Source: src_visibility, NameColumn: name, ValueColumn: id, Value: #edit_info_visibility#)\r\n            }.Else{\r\n                Select(Name: Visibility, Source: src_visibility, NameColumn: name, ValueColumn: id, Value: 2)\r\n            }\r\n        }\r\n    }\r\n    Div(row mt-sm){\r\n        Div(col-sm-4 mt-sm text-right){\r\n            Label(){\r\n                LangRes(@1catalog_ecosystems_type)\r\n            }\r\n            Span(Class: text-danger, Body:*)\r\n        }\r\n        Div(col-sm-8){\r\n            If(GetVar(edit_info_type)){\r\n                Select(Name: Type, Source: src_type, NameColumn: name, ValueColumn: id, Value: #edit_info_type#)\r\n            }.Else{\r\n                Select(Name: Type, Source: src_type, NameColumn: name, ValueColumn: id)\r\n            }\r\n        }\r\n    }\r\n    Div(row mt-sm){\r\n        Div(col-sm-4 mt-sm text-right){\r\n            Label(){\r\n                LangRes(@1catalog_ecosystems_payment)\r\n            }\r\n            Span(Class: text-danger, Body:*)\r\n        }\r\n        Div(col-sm-8){\r\n            If(GetVar(edit_info_payment)){\r\n                Select(Name: Payment, Source: src_payment, NameColumn: name, ValueColumn: id, Value: #edit_info_payment#)\r\n            }.Else{\r\n                Select(Name: Payment, Source: src_payment, NameColumn: name, ValueColumn: id)\r\n            }\r\n        }\r\n    }\r\n    Div(row mt-sm){\r\n        Div(col-sm-4 mt-sm text-right){\r\n            Label(){\r\n                LangRes(@1catalog_ecosystems_description)\r\n            }\r\n        }\r\n        Div(col-sm-8){\r\n            If(GetVar(edit_info_description)){\r\n                Input(Name: Description, Type: textarea, Class: rv, Value: #edit_info_description#)\r\n            }.Else{\r\n                Input(Name: Description, Type: textarea, Class: rv)\r\n            }\r\n        }\r\n    }\r\n    Div(row mt-sm){\r\n        Div(col-sm-4 text-right){\r\n            Span(Class: text-bold vc){\r\n                LangRes(@1catalog_ecosystems_logo)\r\n            }\r\n        }\r\n        Div(ml-lg pull-left){\r\n            If(#edit_id#!=1){\r\n                If(#edit_info_logo#>0){\r\n                    Input(Name: Logo, Type: hidden, Value: #edit_info_logo#)\r\n                    Image(Src: Binary().ById(#edit_info_logo#)).Style(height: 36px;)\r\n                }.Else{\r\n                    Input(Name: Logo, Type: hidden, Value: 0)\r\n                    Span(Class: fa icon-layers fa-2x vc)\r\n                }\r\n            }.Else{\r\n                Span(Class: fa icon-layers fa-2x vc)\r\n            }\r\n        }\r\n        Div(ml pull-left){\r\n            If(#edit_id#!=1){\r\n                SetVar(ParamNames, \"id;visibility;type;payment;description;logo;switch;conditions;hardware;email;phone;vde_page;vde_form;web_page;web_form\")\r\n                Div(vc){\r\n                    Button(Class: btn btn-default btn-upload, Page: @1upload_page, PageParams: \"back_page=@1ec_manage,back_page_popup=50,back_page_popup_header=$@1catalog_ecosystems_editing$,app_id=#application_id#,buffer_key=ecosystem_logo\", Contract: @1FormStateSave, Params: \"AppId=#application_id#,FormName=ecosystem_catalog_manage_form,ParamNames=#ParamNames#,Param1=Val(Id),Param2=Val(Visibility),Param3=Val(Type),Param4=Val(Payment),Param5=Val(Description),Param6=Val(Logo),Param7=Val(Switch),Param8=Val(Conditions),Param9=Val(Hardware),Param10=Val(Email),Param11=Val(Phone),Param12=Val(Vde_page),Param13=Val(Vde_form),Param14=Val(Web_page),Param15=Val(Web_form)\"){\r\n                        Span(Class: h6, Body: $@1button_upload$)\r\n                    }.Popup(Header: $@1catalog_ecosystems_logo$, Width: 30)\r\n                }\r\n            }\r\n        }\r\n        Div(mt mr pull-right){\r\n            If(And(#buffered#==1,#buffer_value_switch#==\"true\")){\r\n                Div(input-group){\r\n                    Span(Class: mr text-muted, Body: $@1additional_info_edit$)\r\n                    Div(input-group-btn){\r\n                        Input(Name: Switch, Type: \"checkbox\", Value: \"true\", Class: m0)\r\n                    }\r\n                }\r\n            }.Else{\r\n                Div(input-group){\r\n                    Span(Class: mr text-muted, Body: $@1additional_info_edit$)\r\n                    Div(input-group-btn){\r\n                        Input(Name: Switch, Type: \"checkbox\", Value: \"false\", Class: m0)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }.Style(\r\n        .vc {line-height: 36px;}\r\n        .btn-upload {\r\n            padding: 1px 6px;\r\n            border-radius: 3px;\r\n        }\r\n    )\r\n    Div(){\r\n        Div(row mt-sm){\r\n            Div(col-sm-4 mt-sm text-right){\r\n                Label(){\r\n                    LangRes(@1catalog_ecosystems_conditions)\r\n                }\r\n            }\r\n            Div(col-sm-8){\r\n                If(GetVar(edit_info_conditions)){\r\n                    Input(Name: Conditions, Type: textarea, Class: rv, Value: #edit_info_conditions#)\r\n                }.Else{\r\n                    Input(Name: Conditions, Type: textarea, Class: rv)\r\n                }\r\n            }\r\n        }\r\n        Div(row mt-sm){\r\n            Div(col-sm-4 mt-sm text-right){\r\n                Label(){\r\n                    LangRes(@1catalog_ecosystems_hardware)\r\n                }\r\n            }\r\n            Div(col-sm-8){\r\n                If(GetVar(edit_info_hardware)){\r\n                    Input(Name: Hardware, Type: textarea, Class: rv, Value: #edit_info_hardware#)\r\n                }.Else{\r\n                    Input(Name: Hardware, Type: textarea, Class: rv)\r\n                }\r\n            }\r\n        }\r\n        Div(row mt-sm){\r\n            Div(col-sm-4 mt-sm text-right){\r\n                Label(){\r\n                    LangRes(@1catalog_ecosystems_email)\r\n                }\r\n            }\r\n            Div(col-sm-8){\r\n                If(GetVar(edit_info_email)){\r\n                    Input(Name: Email, Value: #edit_info_email#)\r\n                }.Else{\r\n                    Input(Name: Email)\r\n                }\r\n            }\r\n        }\r\n        Div(row mt-sm){\r\n            Div(col-sm-4 mt-sm text-right){\r\n                Label(){\r\n                    LangRes(@1catalog_ecosystems_phone)\r\n                }\r\n            }\r\n            Div(col-sm-8){\r\n                If(GetVar(edit_info_phone)){\r\n                    Input(Name: Phone, Value: #edit_info_phone#)\r\n                }.Else{\r\n                    Input(Name: Phone)\r\n                }\r\n            }\r\n        }\r\n        Div(row mt-sm){\r\n            Div(col-sm-4 mt-sm text-right){\r\n                Label(){\r\n                    LangRes(@1vde_page_address)\r\n                }\r\n            }\r\n            Div(col-sm-8){\r\n                If(GetVar(edit_info_vde_page)){\r\n                    Input(Name: Vde_page, Value: #edit_info_vde_page#)\r\n                }.Else{\r\n                    Input(Name: Vde_page)\r\n                }\r\n            }\r\n        }\r\n        Div(row mt-sm){\r\n            Div(col-sm-4 mt-sm text-right){\r\n                Label(){\r\n                    LangRes(@1vde_form_address)\r\n                }\r\n            }\r\n            Div(col-sm-8){\r\n                If(GetVar(edit_info_vde_form)){\r\n                    Input(Name: Vde_form, Value: #edit_info_vde_form#)\r\n                }.Else{\r\n                    Input(Name: Vde_form)\r\n                }\r\n                Div(Class: m0 h6 text-muted, Body: $@1vde_form_desc$)\r\n            }\r\n        }\r\n        Div(row mt-sm){\r\n            Div(col-sm-4 mt-sm text-right){\r\n                Label(){\r\n                    LangRes(@1web_page_address)\r\n                }\r\n            }\r\n            Div(col-sm-8){\r\n                If(GetVar(edit_info_web_page)){\r\n                    Input(Name: Web_page, Value: #edit_info_web_page#)\r\n                }.Else{\r\n                    Input(Name: Web_page)\r\n                }\r\n            }\r\n        }\r\n        Div(row mt-sm){\r\n            Div(col-sm-4 mt-sm text-right){\r\n                Label(){\r\n                    LangRes(@1web_form_address)\r\n                }\r\n            }\r\n            Div(col-sm-8){\r\n                If(GetVar(edit_info_web_form)){\r\n                    Input(Name: Web_form, Value: #edit_info_web_form#)\r\n                }.Else{\r\n                    Input(Name: Web_form)\r\n                }\r\n                Div(Class: m0 h6 text-muted, Body: $@1web_form_desc$)\r\n            }\r\n        }\r\n    }.Show(\"Switch=true\")\r\n    \r\n    If(#edit_id#==1){\r\n        Button(Body: LangRes(@1save), Class: btn btn-primary pull-right mt-lg disabled)\r\n    }.Else{\r\n        Div(){\r\n            Button(Body: LangRes(@1save), Class: btn btn-primary pull-right mt-lg, Contract: @1EcManageInfo, Page: @1ec_list)\r\n        }.Show(\"Switch=true\")\r\n        Div(){\r\n            Button(Body: LangRes(@1save), Class: btn btn-primary pull-right mt-lg, Contract: @1EcManageInfo, Params:\"Conditions=#edit_info_conditions#,Email=#edit_info_email#,Phone=#edit_info_phone#,Hardware=#edit_info_hardware#,Vde_page=#edit_info_vde_page#,Vde_form=#edit_info_vde_form#,Web_page=#edit_info_web_page#,Web_form=#edit_info_web_form#\", Page: @1ec_list)\r\n        }.Show(\"Switch=false\")\r\n    }\r\n    Button(Body: LangRes(@1back), Class: btn btn-default pull-right mt-lg, Page: @1ec_list)\r\n}.Style(\r\n    .rv {resize: vertical;}\r\n)",
            "Menu": "default_menu",
            "Type": "pages"
        },
        {
            "Name": "ec_preview",
            "Conditions": "ContractConditions(\"@1DeveloperCondition\")",
            "Value": "DBFind(@1applications).Where({ecosystem:1, name:\"Ecosystems catalog\"}).Columns(\"name,id\").Vars(application)\r\nDBFind(@1ecosystems).Where({\"id\": #view_page_id#}).Columns(\"id,name,info->type,info->payment,info->logo,info->description,info->conditions,info->email,info->phone,info->hardware,info->vde_page,info->vde_form,info->web_page,info->web_form\").Vars(preview)\r\nForm(){\r\n    If(#view_page_id#>0){\r\n        Div(row){\r\n            Div(col-sm-4){\r\n                Div(text-center){\r\n                    If(#preview_info_logo#>0){\r\n                        Image(Src: Binary().ById(#preview_info_logo#)).Style(height: 70px;)\r\n                    }.Else{\r\n                        Span(Class: fa icon-layers fa-5x text-default)\r\n                    }\r\n                    Div(Class: text-bold h4 mt0 mb-sm, Body: #preview_name#)\r\n                }\r\n            }\r\n            Div(col-sm-8 m0){\r\n                Span(Class: text-bold, Body: LangRes(@1catalog_ecosystems_description))\r\n                If(#preview_info_description#!=\"\"){\r\n                    Div(Body: #preview_info_description#)\r\n                }.Else{\r\n                    Div(Body: $@1catalog_ecosystems_description_empty$)\r\n                }\r\n                Div(mt-sm mb-sm){\r\n                    If(#preview_info_type#!=\"\"){\r\n                        Span(Class: label label-default label-dark mr-sm){\r\n                            If(#preview_info_type#==1){\r\n                                Em(Class: fa fa-users mr-sm)\r\n                            }.ElseIf(#preview_info_type#==2){\r\n                                Em(Class: fa fa-handshake-o mr-sm)\r\n                            }.ElseIf(#preview_info_type#==3){\r\n                                Em(Class: fa fa-bank mr-sm)\r\n                            }\r\n                            AppParam(Ecosystem: 1, App: #application_id#, Name: ec_type, Index: #preview_info_type#)\r\n                        }\r\n                    }\r\n                    If(#preview_info_payment#!=\"\"){\r\n                        Span(Class: label label-default label-dark){\r\n                            If(#preview_info_payment#==1){\r\n                                Em(Class: fa fa-gift mr-sm)\r\n                            }.ElseIf(#preview_info_payment#==2){\r\n                                Em(Class: fa fa-usd mr-sm)\r\n                            }\r\n                            AppParam(Ecosystem: 1, App: #application_id#, Name: ec_payment, Index: #preview_info_payment#)\r\n                        }\r\n                    }\r\n                }\r\n            }.Style(\r\n                .label-dark {\r\n                    color:#515253;\r\n                    font-size: 12px;\r\n                    font-weight: normal;\r\n                }\r\n            )\r\n        }\r\n        If(Or(#preview_info_conditions#!=\"\",#preview_info_hardware#!=\"\")){\r\n            Div(list-group-item mt-sm){\r\n                If(#preview_info_conditions#!=\"\"){\r\n                    Div(row mt-sm){\r\n                        Div(col-sm-4 text-right){\r\n                            Label(){\r\n                                LangRes(@1catalog_ecosystems_conditions)\r\n                            }\r\n                        }\r\n                        Div(col-sm-8){\r\n                            Span(Body: #preview_info_conditions#)\r\n                        }\r\n                    }\r\n                }\r\n                If(#preview_info_hardware#!=\"\"){\r\n                    Div(row mt-sm){\r\n                        Div(col-sm-4 text-right){\r\n                            Label(){\r\n                                LangRes(@1catalog_ecosystems_hardware)\r\n                            }\r\n                        }\r\n                        Div(col-sm-8){\r\n                            Span(Body: #preview_info_hardware#)\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        If(Or(#preview_info_email#!=\"\",#preview_info_phone#!=\"\")){\r\n            Div(list-group-item mt-sm){\r\n                If(#preview_info_email#!=\"\"){\r\n                    Div(row mt-sm){\r\n                        Div(col-sm-4 text-right){\r\n                            Label(){\r\n                                LangRes(@1catalog_ecosystems_email)\r\n                            }\r\n                        }\r\n                        Div(col-sm-8){\r\n                            Span(Body: #preview_info_email#)\r\n                        }\r\n                    }\r\n                }\r\n                If(#preview_info_phone#!=\"\"){\r\n                    Div(row mt-sm){\r\n                        Div(col-sm-4 text-right){\r\n                            Label(){\r\n                                LangRes(@1catalog_ecosystems_phone)\r\n                            }\r\n                        }\r\n                        Div(col-sm-8){\r\n                            Span(Body: #preview_info_phone#)\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        If(Or(#preview_info_vde_page#!=\"\",#preview_info_vde_form#!=\"\",#preview_info_web_page#!=\"\",#preview_info_web_form#!=\"\")){\r\n            Div(list-group-item mt-sm){\r\n                If(#preview_info_vde_page#!=\"\"){\r\n                    Div(row mt-sm){\r\n                        Div(col-sm-4 text-right){\r\n                            Label(){\r\n                                LangRes(@1vde_page_address)\r\n                            }\r\n                        }\r\n                        Div(col-sm-8){\r\n                            Span(Body: #preview_info_vde_page#)\r\n                        }\r\n                    }\r\n                }\r\n                If(#preview_info_vde_form#!=\"\"){\r\n                    Div(row mt-sm){\r\n                        Div(col-sm-4 text-right){\r\n                            Label(){\r\n                                LangRes(@1vde_form_address)\r\n                            }\r\n                        }\r\n                        Div(col-sm-8){\r\n                            Span(Body: #preview_info_vde_form#)\r\n                        }\r\n                    }\r\n                }\r\n                If(#preview_info_web_page#!=\"\"){\r\n                    Div(row mt-sm){\r\n                        Div(col-sm-4 text-right){\r\n                            Label(){\r\n                                LangRes(@1web_page_address)\r\n                            }\r\n                        }\r\n                        Div(col-sm-8){\r\n                            Span(Body: #preview_info_web_page#)\r\n                        }\r\n                    }\r\n                }\r\n                If(#preview_info_web_form#!=\"\"){\r\n                    Div(row mt-sm){\r\n                        Div(col-sm-4 text-right){\r\n                            Label(){\r\n                                LangRes(@1web_form_address)\r\n                            }\r\n                        }\r\n                        Div(col-sm-8){\r\n                            Span(Body: #preview_info_web_form#)\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    If(GetVar(search)==\"\"){\r\n        SetVar(search,)\r\n    }\r\n    Button(Body: LangRes(@1back), Class: btn btn-default pull-right mt, Page: @1ec_list, PageParams: \"sort=#sort#,page_par=#page_par#,search=#search#,current_page=#current_page#\")\r\n}",
            "Menu": "default_menu",
            "Type": "pages"
        },
        {
            "Name": "EcManageInfo",
            "Conditions": "ContractConditions(\"@1DeveloperCondition\")",
            "Value": "contract EcManageInfo {\r\n    data {\r\n        Id int\r\n        Visibility int\r\n        Type int\r\n        Payment int\r\n        Logo int \"optional\"\r\n        Description string \"optional\"\r\n        Conditions string \"optional\"\r\n        Email string \"optional\"\r\n        Phone string \"optional\"\r\n        Hardware string \"optional\"\r\n        Vde_page string \"optional\"\r\n        Vde_form string \"optional\"\r\n        Web_page string \"optional\"\r\n        Web_form string \"optional\"\r\n    }\r\n    \r\n    conditions {\r\n        var access map\r\n        access = DBFind(\"@1parameters\").Where({\"$and\": [{\"ecosystem\": $Id}, {\"$or\": [{\"$and\": [{\"name\": \"founder_account\"},{\"value\": $key_id}]},{\"$and\": [{\"name\": \"delegate_account\"},{\"value\": $key_id}]}]}]}).Row()\r\n        if !access {\r\n            warning LangRes(\"@1ecosystem_cannot_manage_info\", \"en\")\r\n        }\r\n    }\r\n\r\n    action {\r\n        var ecosystem_info map\r\n        ecosystem_info[\"visibility\"] = $Visibility\r\n        ecosystem_info[\"type\"] = $Type\r\n        ecosystem_info[\"payment\"] = $Payment\r\n        ecosystem_info[\"logo\"] = $Logo\r\n        ecosystem_info[\"description\"] = $Description\r\n        ecosystem_info[\"conditions\"] = $Conditions\r\n        ecosystem_info[\"email\"] = $Email\r\n        ecosystem_info[\"phone\"] = $Phone\r\n        ecosystem_info[\"hardware\"] = $Hardware\r\n        ecosystem_info[\"vde_page\"] = $Vde_page\r\n        ecosystem_info[\"vde_form\"] = $Vde_form\r\n        ecosystem_info[\"web_page\"] = $Web_page\r\n        ecosystem_info[\"web_form\"] = $Web_form\r\n        DBUpdate(\"@1ecosystems\", $Id, {\"info\": ecosystem_info})\r\n    }\r\n}",
            "Type": "contracts"
        }
    ]
}