{
    "name": "Demo apps",
    "data": [
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "If(#notific_id#>0){\n    DBFind(notifications,notes).Columns(\"page_params->admin,page_params->land_id\").Where(\"id=#notific_id#\").Vars(note)\n}\nIf(#note_page_params_land_id#>0){\n    SetVar(LandId,#note_page_params_land_id#)\n}.Else{\n    SetVar(LandId,1)\n}\nIf(#note_page_params_admin#==1){\n    SetVar(admin,1)\n}\nIf(#admin#==1){\n    SetTitle($depart_role2$)\n}.Else{\n    SetTitle($owner$)\n}\n\nAppParam(App:#application_id#, Name: land_yes_no, Source: src_yes_no)\nDBFind(land_registry,src_entry).WhereId(#LandId#).Vars(entry)\nDBFind(members,src_owners).Where(\"id=#entry_owner_id#\").Vars(owner)\nSetVar(cons,).(cert,$undefined$).(legal,$undefined$)\nData(part1,\"Res,Val\"){\n    \"$area_size$ (Span(m).(2,sup))\",#entry_area#\n    $owner$,#owner_member_name#\n    $address$,#entry_address#\n    $record_add_date$,DateTime(#entry_date_create#)\n    $buildings_use_class$,\"AppParam(App:#application_id#, Name: land_buildings_use_class, Index: #entry_buildings_use_class#)\"\n    $land_nature$,\"AppParam(App:#application_id#, Name: land_nature, Index: #entry_land_nature#)\"\n}\n\nIf(#admin#==1){\n    If(GetVar(entry_price)){\n        SetVar(cons,#entry_price#)\n    }\n    Data(part2,\"Res,Val\"){\n        $consideration_value$,#cons#\n    }\n    Data(part3,\"Name,Type,Res,Val,Src\"){\n        EncumbranceCertificate,radio,$encumbrance_certificate$,#entry_encumbrance_certificate#,src_yes_no\n        LegalStatus,radio,$legal_status$,#entry_legal_status#,src_yes_no\n    }\n}.Else{\n    If(GetVar(entry_encumbrance_certificate)){\n        SetVar(cert,AppParam(App:#application_id#, Name: land_yes_no, Index: #entry_encumbrance_certificate#))\n    }\n    If(GetVar(entry_legal_status)){\n        SetVar(legal,AppParam(App:#application_id#, Name: land_yes_no, Index: #entry_legal_status#))\n    }\n    Data(part2,\"Name,Type,Res,Val\"){\n        Price,number,$consideration_value$,#entry_price#\n    }\n    Data(part3,\"Res,Val\"){\n        $consideration_value$,#cert#\n        $legal_status$,#legal#\n    }\n}\nData(parts,\"Part\"){\n    part1\n    part2\n    part3\n}\nDiv(content-wrapper){\n    Div(breadcrumb){\n        LinkPage(LangRes(land_records), land_registry_records, PageParams: \"admin=#admin#\")\n        Span(/,mh)\n        Span(LangRes(land_records_edit) ##LandId#, text-muted)\n    }\n    Div(container){\n        Div(row){\n            Div(col-sm-8 col-sm-offset-2 text-left){\n                Form(panel panel-primary){\n                    Div(list-group-item text-center){\n                        Div(h3){LangRes(land_records_edit)}\n                    }\n                    Div(list-group-item){\n                        Map(Hmap:300, MapType: hybrid, Value: #entry_map_coords#)\n                    }\n                    ForList(parts){\n                        Div(list-group-item){\n                            ForList(#Part#){\n                                Div(row mt-sm h5 flex){\n                                    Div(col-md-5 text-right text-bold){#Res#:}\n                                    Div(col-md-6 text-left){\n                                        If(#Type#==number){\n                                            Input(Name: #Name#, Class: input-sm, Value: #Val#, Type: #type#)\n                                        }.ElseIf(#Type#==radio){\n                                            Div(form-inline text-nowrap){\n                                                RadioGroup(Name: #Name#, Value: #Val#, Source: #Src#, ValueColumn: id, NameColumn: name)\n                                            }\n                                        }.Else{\n                                            #Val#\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n\n                    Div(panel-footer text-right){\n                        Input(Name: LandId, Type: hidden, Value: #LandId#)\n                        Button(Page: land_registry_records, Body: $back$, Class: btn btn-default pull-left, PageParams: \"admin=#admin#\")\n\n                        If(#admin#==1){\n                            Button(Body: $save$, Class: btn btn-primary, Contract: land_registry_UpdateAdmin, Params: \"NotificId=#notific_id#\", Page: land_registry_records)\n                        }.Else{\n                            Button(Body: $save$, Class: btn btn-primary, Contract: land_registry_UpdateOwner, Params: \"Price=Val(Price),NotificId=#notific_id#\", Page: land_registry_records)\n                        }\n                    }\n                }\n            }\n        }\n    }.Style(\n        .sup {vertical-align: super;font-size:small;display: inline-block;}\n        .flex {display: flex;align-items: center;}\n    )\n}",
            "Name": "land_registry_edit",
            "Type": "blocks"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "If(GetVar(Search)){\n    SetVar(Where,\"delete=0 and buildings_use_class=#Search#\")\n}.Else{\n    SetVar(Where,\"delete=0\").(Search,)\n}\n\nIf(GetVar(Order)){}.Else{\n    SetVar(Order,\"id desc\")\n}\n\nDBFind(Name: land_registry, Source: src_land_registry).Where(#Where#).Order(#Order#).Custom(_id){\n    Span(#id#)\n}.Custom(_owner){\n    DBFind(Name: members, Source: src_members).Where(\"id=#owner_id#\").Vars(row)\n    LinkPage(Page: profile_view, PageParams: \"v_member_id=#row_id#\"){\n        Span(Class: h5 text-bold, Body: #row_member_name#)\n    }\n}.Custom(_land){\n    Span(AppParam(App:#application_id#, Name: land_use, Index: #land_use#))\n}.Custom(_buildings){\n    Span(AppParam(App:#application_id#, Name: land_buildings_use_class, Index: #buildings_use_class#))\n}.Custom(_area){\n    Span(#area#)\n}.Custom(_address){\n    Span(#address#)\n}.Custom(_cons){\n    Div(h6 ml-lg){\n        If(#price#>0){\n            Span(#price#)\n        }.Else{\n            Em(Class: fa fa-1x text-muted fa-question-circle)\n        }\n    }\n}.Custom(_legal){\n    Div(h6 ml-lg){\n        If(#legal_status#==0){\n            Em(Class: fa fa-1x text-muted fa-question-circle)\n        }\n        If(#legal_status#==1){\n            Em(Class: fa fa-1x text-success fa-check-circle)\n        }\n        If(#legal_status#==2){\n            Em(Class: fa fa-1x text-danger fa-exclamation-circle)\n        }\n    }\n}.Custom(_encumberance){\n    Div(h6 ml-lg){\n        If(#encumbrance_certificate#==0){\n            Em(Class: fa fa-1x text-muted fa-question-circle)\n        }\n        If(#encumbrance_certificate#==1){\n            Em(Class: fa fa-1x text-success fa-check-circle)\n        }\n        If(#encumbrance_certificate#==2){\n            Em(Class: fa fa-1x text-danger fa-exclamation-circle)\n        }\n    }\n}.Custom(_actions){\n    Div(text-right text-nowrap){\n        Button(Page: #this#, Contract: land_registry_Delete, Params: \"LandId=#id#\", Class: btn btn-default fa fa-2x fa-trash mh-sm)\n        Button(Page: land_registry_view, PageParams: \"LandId=#id#\", Class: btn btn-default fa fa-2x fa-eye mh-sm)\n    }\n}.Count(reg_count)\n\nDiv(content-wrapper){\n    Form(panel panel-primary){\n        Div(list-group-item){\n            Div(row){\n                Div(col-md-9 text-left){\n                    Div(input-group){\n                        Div(input-group-addon){\n                            $buildings_use_class$\n                        }\n                        AppParam(App:#application_id#, Name: buildings_use_class, Source:src_search)\n                        Select(Name: BuildingUse, Source: src_search, NameColumn: name, ValueColumn: id, Value: #Search#)\n\n                        Div(input-group-btn){\n                            Button(Page: #this#, PageParams: \"Search=Val(BuildingUse),Order=#Order#\", Class: btn btn-default fa fa-search)\n                        }\n                    }\n                }\n                Div(col-md-3 text-center){\n                    Div(btn-group text-nowrap){\n                        If(#Order#==\"price\"){\n                            Button(Page: #this#, Class: ml-sm btn bg-gray, PageParams: \"Order=price desc,Search=#Search#\", Body: Em(Class:fa fa-sort-numeric-asc) $price$)\n                        }.ElseIf(#Order#==\"price desc\"){\n                            Button(Page: #this#, Class: ml-sm btn bg-gray, PageParams: \"Order=price,Search=#Search#\", Body: Em(Class:fa fa-sort-numeric-desc) $price$)\n                        }.Else{\n                            Button(Page: #this#, Class: ml-sm btn bg-gray-lighter, PageParams: \"Order=price,Search=#Search#\", Body: $price$)\n                        }\n\n                        If(#Order#==\"area\"){\n                            Button(Page: #this#, Class: ml-sm btn bg-gray, PageParams: \"Order=area desc,Search=#Search#\", Body: Em(Class:fa fa-sort-numeric-asc) $area_size$)\n                        }.ElseIf(#Order#==\"area desc\"){\n                            Button(Page: #this#, Class: ml-sm btn bg-gray, PageParams: \"Order=area,Search=#Search#\", Body: Em(Class:fa fa-sort-numeric-desc) $area_size$)\n                        }.Else{\n                            Button(Page: #this#, Class: ml-sm btn bg-gray-lighter, PageParams: \"Order=area desc,Search=#Search#\", Body: $area_size$)\n                        }\n                    }\n\n\n                }\n            }\n        }\n        Div(list-group-item){\n            If(#reg_count#>0){\n                Table(Source:src_land_registry, Columns: \"ID=_id,$owner$=_owner,$area_size$=_area,$address$=_address,$consideration_value$(INR)=_cons,$legal_status$=_legal,$encumbrance_certificate$=_encumberance,=_actions\")\n            }.Else{\n                Div(text-center h3){\n                    records not found\n                }\n            }\n            If(GetVar(Search)){\n                Form(text-center){\n                    Button(Page: #this#, Class: btn btn-primary btn-oval){\n                        LangRes(view_all)\n                    }\n                }\n            }\n        }\n        Div(panel-footer text-right){\n            Button(Page: land_registry_add, Class: btn btn-primary, Body: $add$)\n        }\n    }\n}",
            "Name": "land_registry_records",
            "Type": "blocks"
        },
        {
            "Conditions": "ContractAccess(\"@1EditMenu\")",
            "Value": "MenuItem(Title: $land_records$, Page: land_registry_records,Icon: \"fa icon-home\")",
            "Name": "Applications",
            "Type": "menu"
        },
        {
            "Conditions": "ContractAccess(\"@1EditMenu\")",
            "Value": "MenuItem(Title: $notifications$, Page: demo_notifications, Icon:fa fa-inbox)\nMenuItem(Title: $profile_edit$, Page: profile_edit, Icon:fa fa-address-card-o)\nMenuItem(Title: $applications$, Page: applications_list, Icon:fa fa-list-ul)",
            "Name": "default_menu",
            "Type": "menu"
        },
        {
            "Name": "add",
            "Trans": "{\"en\": \"Add\", \"ru\": \"Добавить\"}",
            "Type": "languages"
        },
        {
            "Name": "add_new_record",
            "Trans": "{\"en\":\"Add new record\",\"ru\":\"Добавить новую запись\"}",
            "Type": "languages"
        },
        {
            "Name": "add_role",
            "Trans": "{\"en\": \"Add role\", \"ru\": \"Добавить роль\"}",
            "Type": "languages"
        },
        {
            "Name": "address",
            "Trans": "{\"en\":\"Address\",\"ru\":\"Адрес\"}",
            "Type": "languages"
        },
        {
            "Name": "applications",
            "Trans": "{\"en\":\"Applications\",\"ru\":\"Приложения\"}",
            "Type": "languages"
        },
        {
            "Name": "area_size",
            "Trans": "{\"en\":\"Area size\",\"ru\":\"Размер\"}",
            "Type": "languages"
        },
        {
            "Name": "ask_request_second",
            "Trans": "{\"en\":\"Do you want to send a second request?\",\"ru\":\"Вы хотите отправить повторный запрос?\"}",
            "Type": "languages"
        },
        {
            "Name": "attention",
            "Trans": "{\"en\": \"ATTENTION! The page has not received parameters and is unavailable for viewing.\", \"ru\": \"ВНИМАНИЕ! Страница не получила параметров и не доступна для просмотра.\"}",
            "Type": "languages"
        },
        {
            "Name": "avatar",
            "Trans": "{\"en\": \"Avatar\", \"ru\": \"Фото\"}",
            "Type": "languages"
        },
        {
            "Name": "back",
            "Trans": "{\"en\": \"Back\", \"ru\": \"Назад\"}",
            "Type": "languages"
        },
        {
            "Name": "buildings_use_class",
            "Trans": "{\"en\":\"Buildings use class\",\"ru\":\"Класс используемых зданий\"}",
            "Type": "languages"
        },
        {
            "Name": "cancel",
            "Trans": "{\"en\":\"Cancel\",\"ru\":\"Отмена\"}",
            "Type": "languages"
        },
        {
            "Name": "change",
            "Trans": "{\"en\": \"Change\", \"ru\": \"Изменить\"}",
            "Type": "languages"
        },
        {
            "Name": "close",
            "Trans": "{\"en\": \"Close\", \"ru\": \"Закрыть\"}",
            "Type": "languages"
        },
        {
            "Name": "code",
            "Trans": "{\"en\":\"Code\",\"ru\":\"Код\"}",
            "Type": "languages"
        },
        {
            "Name": "confirm",
            "Trans": "{\"en\":\"Confirm\",\"ru\":\"Подтвердить\"}",
            "Type": "languages"
        },
        {
            "Name": "consideration_value",
            "Trans": "{\"en\":\"Consideration value\",\"ru\":\"Справедливая стоимость\"}",
            "Type": "languages"
        },
        {
            "Name": "create",
            "Trans": "{\"en\": \"Create\", \"ru\": \"Создать\"}",
            "Type": "languages"
        },
        {
            "Name": "demo_sendContract",
            "Trans": "{\"en\":\"Send to contract\",\"ru\":\"Передача в контракт\"}",
            "Type": "languages"
        },
        {
            "Name": "demo_sendMessage",
            "Trans": "{\"en\":\"Send a text parameter to a notification\",\"ru\":\"Передача текстового параметра в оповещении\"}",
            "Type": "languages"
        },
        {
            "Name": "demo_sendPage",
            "Trans": "{\"en\":\"Send to page\",\"ru\":\"Передача на страницу\"}",
            "Type": "languages"
        },
        {
            "Name": "demo_title",
            "Trans": "{\"en\":\"Demonstration\",\"ru\":\"Демонстрация\"}",
            "Type": "languages"
        },
        {
            "Name": "depart_role1",
            "Trans": "{\"en\":\"Department of Land Resources\",\"ru\":\"Департамент земельных ресурсов\"}",
            "Type": "languages"
        },
        {
            "Name": "depart_role2",
            "Trans": "{\"en\":\"Department of Legal Affairs\",\"ru\":\"Департамент по правовым вопросам\"}",
            "Type": "languages"
        },
        {
            "Name": "depart_role3",
            "Trans": "{\"en\":\"Department of Revenue\",\"ru\":\"Департамент налогов и сборов\"}",
            "Type": "languages"
        },
        {
            "Name": "department_of_land_resources",
            "Trans": "{\"en\":\"Department of Land Resources\",\"ru\":\"Отдел земельных ресурсов\"}",
            "Type": "languages"
        },
        {
            "Name": "description",
            "Trans": "{\"en\": \"Description\", \"ru\": \"Описание\"}",
            "Type": "languages"
        },
        {
            "Name": "edit_contract",
            "Trans": "{\"en\":\"Edit contract\",\"ru\":\"Редактировать контракт\"}",
            "Type": "languages"
        },
        {
            "Name": "edit_page",
            "Trans": "{\"en\":\"Edit page\",\"ru\":\"Редактировать страницу\"}",
            "Type": "languages"
        },
        {
            "Name": "editing_profile",
            "Trans": "{\"en\": \"Editing profile\", \"ru\": \"Редактирование профиля\"}",
            "Type": "languages"
        },
        {
            "Name": "encumbrance_certificate",
            "Trans": "{\"en\":\"Encumbrance certificate\",\"ru\":\"Сертификат обременения\"}",
            "Type": "languages"
        },
        {
            "Name": "id",
            "Trans": "{\"en\": \"ID\", \"ru\": \"ID\"}",
            "Type": "languages"
        },
        {
            "Name": "input",
            "Trans": "{\"en\":\"Input\",\"ru\":\"Ввод\"}",
            "Type": "languages"
        },
        {
            "Name": "land_nature",
            "Trans": "{\"en\":\"Nature\",\"ru\":\"Тип\"}",
            "Type": "languages"
        },
        {
            "Name": "land_record",
            "Trans": "{\"en\":\"Land record\",\"ru\":\"Земельная запись\"}",
            "Type": "languages"
        },
        {
            "Name": "land_records",
            "Trans": "{\"en\":\"Land Registry\",\"ru\":\"Земельный реестр\"}",
            "Type": "languages"
        },
        {
            "Name": "land_records_add",
            "Trans": "{\"en\":\"Land Record adding\",\"ru\":\"Добавление земельной записи\"}",
            "Type": "languages"
        },
        {
            "Name": "land_records_edit",
            "Trans": "{\"en\":\"Land record edit\",\"ru\":\"Редактирование земельной записи\"}",
            "Type": "languages"
        },
        {
            "Name": "land_use",
            "Trans": "{\"en\":\"Land use\",\"ru\":\"Землепользование\"}",
            "Type": "languages"
        },
        {
            "Name": "legal_status",
            "Trans": "{\"en\":\"Legal status\",\"ru\":\"Правовой статус\"}",
            "Type": "languages"
        },
        {
            "Name": "member_id",
            "Trans": "{\"en\": \"Member ID\", \"ru\": \"ID члена\"}",
            "Type": "languages"
        },
        {
            "Name": "name",
            "Trans": "{\"en\": \"Name\", \"ru\": \"Название\"}",
            "Type": "languages"
        },
        {
            "Name": "need_your_processing",
            "Trans": "{\"en\":\"Need your processing\",\"ru\":\"Нужна ваша обработка\"}",
            "Type": "languages"
        },
        {
            "Name": "new_land",
            "Trans": "{\"en\":\"New land\",\"ru\":\"Новая земля\"}",
            "Type": "languages"
        },
        {
            "Name": "new_voting",
            "Trans": "{\"en\": \"New voting\", \"ru\": \"Новое голосование\"}",
            "Type": "languages"
        },
        {
            "Name": "no",
            "Trans": "{\"en\":\"No\",\"ru\":\"Нет\"}",
            "Type": "languages"
        },
        {
            "Name": "no_problem",
            "Trans": "{\"en\":\"No Issues\",\"ru\":\"Нет проблем\"}",
            "Type": "languages"
        },
        {
            "Name": "notifications",
            "Trans": "{\"en\": \"Notifications\", \"ru\": \"Уведомления\"}",
            "Type": "languages"
        },
        {
            "Name": "owner",
            "Trans": "{\"en\":\"Owner\",\"ru\":\"Владелец\"}",
            "Type": "languages"
        },
        {
            "Name": "price",
            "Trans": "{\"en\":\"Price\",\"ru\":\"Цена\"}",
            "Type": "languages"
        },
        {
            "Name": "problem",
            "Trans": "{\"en\":\"Have Issues\",\"ru\":\"Проблемы\"}",
            "Type": "languages"
        },
        {
            "Name": "profile_edit",
            "Trans": "{\n    \"en\": \"Profile edit\",\n    \"ru\": \"Редактирование профиля\"\n}",
            "Type": "languages"
        },
        {
            "Name": "record_add_date",
            "Trans": "{\"en\":\"Record Add Date\",\"ru\":\"Дата добавления записи\"}",
            "Type": "languages"
        },
        {
            "Name": "referendum",
            "Trans": "{\"en\":\"Referendum\",\"ru\":\"Референдум\"}",
            "Type": "languages"
        },
        {
            "Name": "registration_date",
            "Trans": "{\"en\":\"Registration Date\",\"ru\":\"Дата регистрации\"}",
            "Type": "languages"
        },
        {
            "Name": "result",
            "Trans": "{\"en\":\"Result\",\"ru\":\"Результат\"}",
            "Type": "languages"
        },
        {
            "Name": "save",
            "Trans": "{\"en\": \"Save\", \"ru\": \"Сохранить\"}",
            "Type": "languages"
        },
        {
            "Name": "send_contract",
            "Trans": "{\"en\":\"Send to contract\",\"ru\":\"Отправить в контракт\"}",
            "Type": "languages"
        },
        {
            "Name": "send_notify",
            "Trans": "{\"en\":\"Send Notification\",\"ru\":\"Отправить оповещение\"}",
            "Type": "languages"
        },
        {
            "Name": "send_page",
            "Trans": "{\"en\":\"Send to page\",\"ru\":\"Отправить на страницу\"}",
            "Type": "languages"
        },
        {
            "Name": "send_request",
            "Trans": "{\"en\":\"Send request\",\"ru\":\"Послать запрос\"}",
            "Type": "languages"
        },
        {
            "Name": "total_votes",
            "Trans": "{\"en\":\"Total votes\",\"ru\":\"Всего проголосовало\"}",
            "Type": "languages"
        },
        {
            "Name": "undefined",
            "Trans": "{\"en\":\"Undefined\",\"ru\":\"Не определено\"}",
            "Type": "languages"
        },
        {
            "Name": "user_info",
            "Trans": "{\"en\": \"User information\", \"ru\": \"Информация о пользователе\"}",
            "Type": "languages"
        },
        {
            "Name": "username",
            "Trans": "{\"en\": \"Username\", \"ru\": \"Никнейм\"}",
            "Type": "languages"
        },
        {
            "Name": "view_all",
            "Trans": "{\"en\": \"View all\", \"ru\": \"Посмотреть все\"}",
            "Type": "languages"
        },
        {
            "Name": "votes_taken_accept",
            "Trans": "{\"ru\":\"Положительных голосов\",\"en\":\"Positive votes\"}",
            "Type": "languages"
        },
        {
            "Name": "votes_taken_reject",
            "Trans": "{\"ru\":\"Отрицательных голосов\",\"en\":\"Negative votes\"}",
            "Type": "languages"
        },
        {
            "Name": "want_save",
            "Trans": "{\"en\":\"Do you want to save changes?\",\"ru\":\"Действительно хотите сохранить\"}",
            "Type": "languages"
        },
        {
            "Name": "yes",
            "Trans": "{\"en\":\"Yes\",\"ru\":\"Да\"}",
            "Type": "languages"
        },
        {
            "Name": "land_registry",
            "Columns": "[{\"name\":\"address\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"land_use\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"land_nature\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"modification_date\",\"type\":\"datetime\",\"conditions\":\"true\"},{\"name\":\"tax_receipt_and_bills\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"encumbrance_certificate\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"area\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"delete\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"price_gov_value\",\"type\":\"money\",\"conditions\":\"true\"},{\"name\":\"buildings_use_class\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"price_market_value\",\"type\":\"money\",\"conditions\":\"true\"},{\"name\":\"owner_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"map_coords\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"date_create\",\"type\":\"datetime\",\"conditions\":\"true\"},{\"name\":\"legal_status\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"land_local_body\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"registration_date\",\"type\":\"datetime\",\"conditions\":\"true\"},{\"name\":\"price\",\"type\":\"money\",\"conditions\":\"true\"}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}",
            "Type": "tables"
        },
        {
            "Name": "land_registry_ownership",
            "Columns": "[{\"name\":\"dep3_approved\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"lend_object_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"price\",\"type\":\"money\",\"conditions\":\"true\"},{\"name\":\"owner_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"date_signing\",\"type\":\"datetime\",\"conditions\":\"true\"},{\"name\":\"owner_new_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"step\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"date_creat\",\"type\":\"datetime\",\"conditions\":\"true\"},{\"name\":\"owner_type\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"dep2_approved\",\"type\":\"number\",\"conditions\":\"true\"}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}",
            "Type": "tables"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "Shops,Financial and professional services,Restaurants and cafes,Business,Hotels,Dwellinghouses,Non-residential institutions,No",
            "Name": "land_buildings_use_class",
            "Type": "app_params"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "No Issues,Have Issues",
            "Name": "land_ec_status",
            "Type": "app_params"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "Minor Gram Panchayat,Major Gram Panchayat,Other Municipality/Notified Area,Municipal Corporation",
            "Name": "land_local_body",
            "Type": "app_params"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "0101 Sale Deed,0111 AGREEMENT OF SALE CUM GPA,0202 Mortgage without Possession,0206 Mortgage deed by small farmer for Agrl.loans in f/o PAC/Bank,0208 Deposit of Title Deeds,0302 Gift Settlement in f/o family member,0303 Gift Settlement in f/o others,0304 Gift Settlement for Charitable/religious purposes,0401 Partition,0402 Partition among Family Members,0505 RECEIPT(R.T.D.M),0701 Lease Deed,0801 Rectification Deed,0803 Cancellation Deed",
            "Name": "land_nature",
            "Type": "app_params"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "01 Residential-U,09 URBAN VacantLand(Residential)-U,21 Dry land-R,26 Wet Land double crop-R,27 Wet Land single crop-R,30 Coconut Garden-R",
            "Name": "land_use",
            "Type": "app_params"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "no_problem,problem",
            "Name": "land_yes_no",
            "Type": "app_params"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "No Issues,Title Not Clear,Multiple Owner Claims,Khata Not Clear",
            "Name": "legal_status",
            "Type": "app_params"
        },
        {
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Value": "DBFind(Name: notifications, Source: noti_s).Columns(\"notification->header,notification->body,notification->type,page_params,page_name\").Where(\"closed=0 and notification->type='1' and recipient->member_id='#key_id#'\")\nSetTitle($notifications$)\nDiv(content-wrapper){\n    Div(container){\n        Div(row){\n            Div(col-sm-8 col-sm-offset-2){\n                Div(panel panel-primary){\n                    Div(panel-heading){$notifications$}\n                    Div(panel-body){\n                        ForList(noti_s){\n                            Div(Class: list-group-item){\n                                LinkPage(Page: #page_name#, PageParams: \"notific_id=#id#\"){\n                                    Div(media-box){\n                                        Div(Class: pull-left){\n                                            Em(Class: fa #icon# fa-1x text-info)\n                                        }\n                                        Div(media-box-body clearfix){\n                                            Div(Class: m0 text-normal, Body: #notification.header#)\n                                            Div(Class: m0 text-muted h6, Body: #notification.body#)\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}",
            "Name": "demo_notifications",
            "Menu": "default_menu",
            "Type": "pages"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "DBFind(applications,src_app).Columns(\"name,id\").Where(\"name='Demo apps'\").Vars(application)\nDBFind(members,src_owners).Custom(name){#member_name#}\nAppParam(App:#application_id#, Name: land_nature, Source: src_nature)\nAppParam(App:#application_id#, Name: land_buildings_use_class, Source: src_class)\nSetVar(defaultCoords,`{\"zoom\":8, \"center\":{\"lat\":51.500,\"lng\":-0.125}}`)\nData(part1, \"Name,Type,Res,Val\"){\n    Coords,map,address,#defaultCoords#\n}\nData(part2, \"Name,Type,Res,Val\"){\n    OwnerId,select,owner,src_owners\n    LandNature,select,land_nature,src_nature\n    BuildingsUseClass,select,buildings_use_class,src_class\n    RegistrationDate,date,registration_date,\n}\nData(parts, \"Part\"){\n    part1\n    part2\n}\nSetTitle($department_of_land_resources$)\nDiv(content-wrapper){\n    Div(breadcrumb){\n        Div(){\n            LinkPage(LangRes(land_records), land_registry_records)\n            Span(/).Style(margin-right: 10px; margin-left: 10px;)\n            Span(LangRes(land_records_add), text-muted)\n        }\n    }\n    Div(container){\n        Div(row){\n            Div(col-sm-8 col-sm-offset-2 text-left){\n                Form(panel panel-primary){\n                    Div(panel-heading){LangRes(add_new_record)}\n                    ForList(parts){\n                        Div(list-group-item){\n                            ForList(#Part#){\n                                Div(row mt-sm){\n                                    Div(col-md-3 text-right){\n                                        Strong(LangRes(#Res#))\n                                    }\n                                    Div(col-md-9 text-center){\n                                        If(#Type#==map){\n                                            InputMap(Name: #Name#, Type: polygon, MapType: hybrid, Value:#Val#)\n                                        }.ElseIf(#Type#==select){\n                                            Select(Name: #Name#, Source: #Val#, ValueColumn: id, NameColumn: name)\n                                        }.Else{\n                                            Input(Name: #Name#, Type: #Type#)\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    Div(panel-footer text-right){\n                        Button(Page: land_registry_records, Body: LangRes(back), Class: btn btn-default pull-left)\n                        Button(Body: LangRes(add), Class: btn btn-primary, Contract: land_registry_Add, Page: land_registry_records)\n                    }\n                }\n            }\n        }\n    }\n}",
            "Name": "land_registry_add",
            "Menu": "Applications",
            "Type": "pages"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "DBFind(applications,src_app).Columns(\"name,id\").Where(\"name='Demo apps'\").Vars(application)\nInclude(land_registry_edit)",
            "Name": "land_registry_edit",
            "Menu": "Applications",
            "Type": "pages"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "DBFind(applications,src_app).Columns(\"name,id\").Where(\"name='Demo apps'\").Vars(application)\nSetTitle($land_records$)\nSetVar(this, land_registry_records)\nInclude(land_registry_records)",
            "Name": "land_registry_records",
            "Menu": "Applications",
            "Type": "pages"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "DBFind(applications,src_app).Columns(\"name,id\").Where(\"name='Demo apps'\").Vars(application)\nIf(GetVar(notific_val_int)){\n    SetVar(LandId, #notific_val_int#)\n}\n\nIf(GetVar(notific_id)){}.Else{SetVar(notific_id,0)}\n\nSetVar(title,$land_record$)\n\nIf(GetVar(LandId)){}.Else{SetVar(LandId,1)}\n\nIf(GetVar(LandId)){\n    DBFind(Name: land_registry, Source: src_entry).WhereId(#LandId#).Vars(entry)\n    DBFind(Name: land_registry_ownership, Source: src_land_ownership).Where(lend_object_id=#LandId#).Vars(ownership)\n\n    DBFind(Name: members, Source: src_owner).Where(id=#ownership_owner_id#).Vars(owner)\n}\nDBFind(notifications).Where(\"page_params->LandId='#LandId#' and page_params->second_request='1' and closed=0\").Vars(alert)\n\nSetVar(alert,0).(btn_legal,0).(btn_cert,0).(btn_price,0).(price,$undefined$)\nIf(#alert_id#>0){\n    SetVar(alert,1)\n}\nIf(And(#entry_legal_status#!=1, #alert#==0)){\n    SetVar(btn_legal,1)\n}\nIf(And(#entry_encumbrance_certificate#!=1, #alert#==0)){\n    SetVar(btn_cert,1)\n}\nIf(#entry_price#>0){\n    SetVar(price,\"#entry_price# INR\")\n}\nIf(#ownership_owner_id#==#key_id#){\n    SetVar(btn_price,1)\n}\n\nData(part1, \"Type,Res,Val\"){\n    map,map,#entry_map_coords#\n}\nData(part2, \"Res,Val\"){\n    \"$area_size$ (Span(m).(2,sup))\",#entry_area#\n    $owner$,#owner_member_name#\n    $address$,#entry_address#\n    $record_add_date$,\"DateTime(#entry_date_create#)\"\n    $buildings_use_class$,\"AppParam(App:#application_id#, Name: land_buildings_use_class, Index: #entry_buildings_use_class#)\"\n    $land_nature$,\"AppParam(App:#application_id#, Name: land_nature, Index: #entry_land_nature#)\"\n}\nData(part3, \"Res,Val,ReqBtn\"){\n    $legal_status$,\"AppParam(App:#application_id#, Name: legal_status, Index: #entry_legal_status#)\",#btn_legal#\n}\nData(part4, \"Res,Val,ReqBtn\"){\n    $encumbrance_certificate$,\"AppParam(App:#application_id#, Name: land_ec_status, Index: #entry_encumbrance_certificate#)\",#btn_cert#\n}\nData(part5, \"Res,Val,PriceBtn\"){\n    $consideration_value$,#price#,#btn_cert#\n}\nData(parts, \"Part\"){\n    part1\n    part2\n    part3\n    part4\n    part5\n}\n\nSetTitle(#title#)\nDiv(content-wrapper){\n    Div(breadcrumb){\n        LinkPage(Body:$land_records$,Page: land_registry_records)\n        Span(/,mh)\n        Span(#title#, text-muted)\n    }\n    If(GetVar(LandId)){\n        Div(container){\n            Div(row){\n                Form(col-sm-8 col-sm-offset-2){\n                    Div(list-group-item text-center){\n                        Div(h3){\n                            $land_record$ #GetVar(LandId)\n                        }\n                    }\n                    ForList(parts){\n                        Div(list-group-item){\n                            ForList(#Part#){\n                                If(#Type#==map){\n                                    Map(MapType: hybrid, Hmap:300, Value: #Val#)\n                                }.Else{\n                                    Div(row mt-sm flex){\n                                        Div(col-md-5 text-right h5 m0 text-bold){#Res#:}\n                                        Div(col-md-7 text-left h5 m0){\n                                            #Val#\n                                            If(#ReqBtn#==1){\n                                                Button(Contract: land_registry_SecondRequest, Body:$send_request$, Params: \"LandId=#LandId#\", Class: ml btn btn-default, Page: land_registry_view, PageParams: \"LandId=#LandId#\").Alert(Text:$ask_request_second$, ConfirmButton:$confirm$, CancelButton:$cancel$)\n                                            }.ElseIf(#PriceBtn#==1){\n                                                Button(Page: land_registry_edit, Body:$change$, PageParams: \"LandId=#LandId#\", Class: ml btn btn-default)\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }.Style(\n            .sup {vertical-align: super;font-size:small;display: inline-block;}\n            .flex {display: flex;align-items: center;}\n        )\n    }\n}",
            "Name": "land_registry_view",
            "Menu": "Applications",
            "Type": "pages"
        },
        {
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Value": "DBFind(Name: notifications, Source: noti_s).Where(\"closed=0 and notification_type=1 and recipient_id=#key_id#\")\nDBFind(Name: notifications, Source: noti_r).Where(\"closed=0 and notification_type=2 and (started_processing_id=0 or started_processing_id=#key_id#)\")\n\nForList(noti_s){\n        Div(Class: list-group-item){\n            LinkPage(Page: #page_name#, PageParams: \"notific_id=#id#,notific_type=#notification_type#,notific_header=#header_text#,#page_params#\"){        \n                Div(media-box){\n                    Div(Class: pull-left){\n                        Em(Class: fa #icon# fa-1x text-info)\n                    } \n                    Div(media-box-body clearfix){ \n                        Div(Class: m0 text-normal, Body: #header_text#) \n                        Div(Class: m0 text-muted h6, Body: #body_text#)\n                    }\n                }\n            }\n        }\n}\n\nForList(noti_r){\n    DBFind(Name: roles_assign, Source: src_roles).Where(\"member_id=#key_id# and role_id=#role_id# and delete=0\").Vars(prefix)\n    If(#prefix_id# > 0){\n        Div(Class: list-group-item){\n            LinkPage(Page: #page_name#, PageParams: \"notific_id=#id#,notific_type=#notification_type#,notific_header=#header_text#,#page_params#\"){        \n                Div(media-box){\n                    Div(Class: pull-left){\n                        Em(Class: fa #icon# fa-1x text-primary)\n                    } \n                    Div(media-box-body clearfix){ \n                        Div(Class: m0 text-normal, Body: #header_text#) \n                        Div(Class: m0 text-muted h6, Body: #body_text#)\n                    }\n                }\n            }\n        }\n    }\n}",
            "Name": "notifications",
            "Menu": "default_menu",
            "Type": "pages"
        },
        {
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Value": "Div(Class: content-wrapper){\n\n\tSetTitle($user_info$)\n\tDiv(Class: breadcrumb){\n\t\tSpan(Class: text-muted, Body: LangRes(user_info))\n\t}\n\n    If(Or(#v_member_id#>0,#v_member_id#<0)){\n    }.Else{\n\t\tSetVar(Name: v_member_id, Value: #key_id#)\n    }\n\tDBFind(Name: members, Source: src_member).Where(id=#v_member_id#).Vars(prefix)\n\t\n\tIf(Or(#prefix_id#>0,#prefix_id#<0)){\n    }.Else{\n        SetVar(Name: prefix_member_name, Value: \"\")\n    }\n\n    Div(Class: row df f-valign){\n        Div(Class: col-md-3)\n        Div(Class: col-md-6){\n            Div(Class: panel panel-default){\n                Form(){ \n\t\t\t\t\tDiv(Class: list-group-item text-center){\n\t\t\t\t\t\tSpan(Class: h3, Body: LangRes(user_info))\t\n\t\t\t\t\t}\n\t\t\t\t\tDiv(Class: list-group-item){\n\t\t\t\t\t\tDiv(Class: row df f-valign){\n\t\t\t\t\t\t\tDiv(Class: col-md-12 mt-sm text-center){\n\t\t\t\t\t\t\t\tIf(Or(#prefix_id#>0,#prefix_id#<0)){\n                                    Div(Body: Span(Class: h3 text-bold, Body: #prefix_member_name#))\n\t\t\t\t\t\t\t\t}.Else{\n\t\t\t\t\t\t\t\t\tButton(Class: btn btn-link, Page: profile_edit){\n\t\t\t\t\t\t\t\t\t\tSpan(Class: h3 text-bold, Body: LangRes(editing_profile))\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n                }\n            }\n\n        }\n        Div(Class: col-md-3)\n    }\n}",
            "Name": "profile_view",
            "Menu": "default_menu",
            "Type": "pages"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract land_registry_Add{\n    data{\n        OwnerId int\n        Coords string // {\"coords\":[{\"lat\":float,\"lng\":float},],\"area\": float,\"address\": string}\n        BuildingsUseClass int\n        LandNature int\n        RegistrationDate string \"date\"\n    }\n\n    func conditions{\n        var member map\n        member = DBFind(\"members\").Where(\"id = ?\", $OwnerId).Row()\n        if !member {\n            warning \"Member account for Owner not found\"\n        }\n        $coordsMap = JSONToMap($Coords)\n        $coordsAddress = $coordsMap[\"address\"]\n        $area = $coordsMap[\"area\"]\n        $area = Sprintf(\"%.0f\", $area)\n\n        if !$coordsAddress {\n            info \"Please input address\"\n        }\n        if $area <= 0 {\n            info \"Please use map for input of the area coordinates\"\n        }\n    }\n\n    func action{\n        var icon header body page string closureType landId landUse landLocalBody area int params map\n        landId = DBInsert(\"land_registry\", \"owner_id,address,area,buildings_use_class,map_coords,land_use,timestamp date_create,delete,land_nature,land_local_body,registration_date,timestamp modification_date\", $OwnerId, $coordsAddress, $area, $BuildingsUseClass, $Coords, landUse, $block_time, 0, $LandNature, landLocalBody, $RegistrationDate, $block_time)\n\n        DBInsert(\"land_registry_ownership\", \"step, timestamp date_creat, timestamp date_signing, lend_object_id, owner_id, owner_new_id\", -1, $block_time, $block_time, landId, $OwnerId, $OwnerId)\n\n        icon = \"fa fa-bell-o\"\n        body = \"$need_your_processing$\"\n\n        var key map key_id int\n        key = DBFind(\"members\").Where(\"id!=?\", $key_id).Order(\"id\").Row()\n\n        if key{\n            key_id = Int(key[\"id\"])\n        } else {\n            key_id = $key_id\n        }\n\n        //notify owner\n        header = \"New Land: need price\"\n        params[\"land_id\"] = landId\n        page = \"land_registry_edit\"\n        notifications_Send(\"member_id,icon_name,text_header,text_body,page_name,params_map,sender\", $key_id,icon,header,body,page,JSONEncode(params),1)\n\n        //notify depart\n        header = \"Department of Legal Affairs: $new_land$\"\n        params[\"admin\"] = 1\n        page = \"land_registry_edit\"\n        notifications_Send(\"member_id,icon_name,text_header,text_body,page_name,params_map,sender\", key_id,icon,header,body,page,JSONEncode(params),1)\n\n    }\n}",
            "Name": "land_registry_Add",
            "Type": "contracts"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract land_registry_Delete{\n    data{\n        LandId int\n    }\n    \n    func conditions{}\n    \n    func action{\n        DBUpdate(\"land_registry\", $LandId, \"delete\", \"1\")\n    }\n}",
            "Name": "land_registry_Delete",
            "Type": "contracts"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract land_registry_SecondRequest{\n    data{\n        LandId int\n    }\n\n    action{\n        var icon header body page string params map\n        icon = \"fa-bell\"\n        header = \"$new_land$\"\n        body = \"$need_your_processing$\"\n        page = \"land_registry_edit\"\n        params[\"land_id\"] = $LandId\n        params[\"admin\"] = 1\n        params[\"second_request\"] = 1\n        notifications_Send(\"member_id,icon_name,text_header,text_body,page_name,params_map,sender\", $key_id,icon,header,body,page,JSONEncode(params),1)\n    }\n}",
            "Name": "land_registry_SecondRequest",
            "Type": "contracts"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract land_registry_UpdateAdmin{\n    data {\n        LandId int\n        EncumbranceCertificate int\n        LegalStatus int\n        NotificId int\n    }\n    func conditions {\n        $land = DBFind(\"land_registry\").Where(\"id=?\", $LandId).Row()\n        if !$land{\n            warning \"Land not found in registry\"\n        }\n        $name = DBFind(\"members\").Where(\"id=?\", $key_id).One(\"member_name\")\n    }\n    \n    func action { \n        DBUpdate(\"land_registry\", $LandId, \"legal_status,encumbrance_certificate\", $LegalStatus, $EncumbranceCertificate)\n        notifications_Close(\"notific_id\", $NotificId)\n    }\n}",
            "Name": "land_registry_UpdateAdmin",
            "Type": "contracts"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract land_registry_UpdateOwner{\n    data{\n        LandId int\n        NotificId string \"optional\"\n        Price string\n    }\n    \n    func conditions{\n        $Price = Int($Price)\n        $NotificId = Int($NotificId)\n        var entry map\n        entry = DBFind(\"land_registry\").Where(\"id=? and owner_id=?\",$LandId, $key_id).Row()\n        if !entry{\n            info \"You cant change this Land\"\n        }\n    }\n    \n    func action{\n        DBUpdate(\"land_registry\", $LandId, \"price,timestamp modification_date\", $Price, $block_time)\n        if $NotificId > 0{\n            notifications_Close(\"notific_id\", $NotificId)\n        }\n    }\n}",
            "Name": "land_registry_UpdateOwner",
            "Type": "contracts"
        }
    ]
}