{
    "pages": [
        {
            "Name": "a_reg_form",
            "Conditions": "true",
            "Menu": "Applications",
            "Value": "SetTitle(Market place)\n\nDBFind(Name: a_users, Source: users).Where(key_id='#key_id#').Vars(\"users\")\n\nIf(GetVar(users_id)){\n    Include(a_market_place_block)\n}.Else{\n    Include(reg_block)\n}"
        },
        {
            "Name": "a_my_profile_page",
            "Conditions": "true",
            "Menu": "Applications",
            "Value": "SetTitle(My profile)\n\nDiv(content-wrapper){\n    Div(breadcrumb){\n        Div(){\n            LinkPage(Body:Market place,Page: a_reg_form)\n            Span(/).Style(margin-right: 10px; margin-left: 10px;)\n            Span(My profile, text-muted)\n        }\n    }\n    Div(panel panel-primary data-sweet-alert){\n\t\tForm(){\n\t\t\tDiv(list-group-item){\n\t\t\t\tDiv(row df f-valign){\n\t\t\t\t\tDiv(col-md-2 mt-sm text-center text-bold){\n\t\t\t\t\t\tDBFind(\"a_users\", src).Where(\"key_id=#key_id#\").Vars(users)\n      \t\t\t\t\t#users_name# #users_surname#\n\t\t\t\t\t}\n\t\t\t\t\tDiv(col-md-7 mc-sm text-left){}\n                }\n\t\t\t}\n\t\t\tDiv(list-group-item){\n                DBFind(Name: land_registry, Source: registry).Where(owner_id=#key_id#).Custom(_state){\n\t\t\t\t\tSetVar(reg_state, 0)\n\t\t\t\t\tDBFind(Name: a_land_registry_bridge, Source: bridge_registry).Where(master_id=#id#).Vars(reg)\n\t\t\t\t\tIf(#reg_state#){\n\t\t\t\t\t\tSetVar(isState0, 0)\n\t\t\t\t\t}.Else{\n\t\t\t\t\t\tSetVar(isState0, 1)\n\t\t\t\t\t}\n\t\t\t\t\tSpan(#reg_state#)\n\t\t\t\t}.Custom(_price){\n\t\t\t\t\tSetVar(reg_curr_price, 0)\n\t\t\t\t\tDBFind(Name: a_land_registry_bridge, Source: bridge_registry).Where(master_id=#id#).Vars(reg)\n\t\t\t\t\tSpan(#reg_curr_price#)\n\t\t\t\t}.Custom(action){\n                    Form(panel-body input-group){\n                        If(#isState0#){\n                            Input(Placeholder: Price, Type: money, Name: price)\n                            Div(input-group-btn){\n                                Button(Body: Sell, Class: btn btn-success, Contract: RegLand, Params: \"Id=#id#, Price=Val(price)\")\n                            }\n\t\t\t\t\t    }\n                        Button(Page: a_land_page_view, PageParams: \"LandId=#id#\", Class: btn btn-default fa fa-2x fa-eye)\n                    }\n\t\t\t\t}\t\n\t\t\t\tTable(Source:registry, Columns: \"Area=area,Address=address,Price=_price,State=_state,=action\")\n\t\t\t}\n\t\t\tDiv(panel-footer){\n\t\t\t\tDiv(clearfix){\n\t\t\t\t\tForm(pull-right){\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n    }\n}"
        },
        {
            "Name": "a_land_page",
            "Conditions": "true",
            "Menu": "Applications",
            "Value": "If(GetVar(notific_val_int)){\n    SetVar(LandId, #notific_val_int#)\n}.Else{}\n\nIf(GetVar(notific_id)){}.Else{SetVar(notific_id,0)}\n\nSetVar(title,$land_record$)\n\nIf(#LandId#>0){}.Else{SetVar(LandId, 1)}\n\nIf(GetVar(LandId)){\n    DBFind(Name: land_registry, Source: src_entry).WhereId(#LandId#).Vars(entry)\n    DBFind(Name: land_registry_ownership, Source: src_land_ownership).Where(lend_object_id=#LandId#).Vars(ownership)\n    DBFind(Name: members, Source: src_owner).Where(id=#ownership_owner_id#).Vars(owner)\n}\nSetTitle(#title#)\n\nDiv(content-wrapper){\n    Div(breadcrumb){\n        Div(){\n            LinkPage(Body:Market place,Page: a_reg_form)\n            Span(/).Style(margin-right: 10px; margin-left: 10px;)\n            Span(#title#, text-muted)\n        }\n    }\n    If(GetVar(LandId)){\n        Div(row df f-valign){\n            Div(col-sm-8 col-sm-offset-2 col-lg-6 col-lg-offset-3 mt-sm text-left){\n                Div(panel panel-default){\n                    Form(){\n                        Div(Class: list-group-item text-center){\n                            Span(Class: h3, Body: $land_record$ #GetVar(LandId))\t\n                        }\n                        Div(list-group-item){\n                            Map(MapType: hybrid, Hmap:300, Value: #entry_map_coords#)\n                        }\n                        Div(list-group-item){\n                            Div(row df f-valign){\n                                Div(col-md-5 mt-sm text-right h5){\n                                    Strong($area_size$)\n                                    (Span(m).(2).Style(vertical-align: super;font-size:small;)):\n                                }\n                                Div(col-md-7 mt-sm text-left h5){#entry_area#}\n                            }\n                            Div(row df f-valign){\n                                Div(col-md-5 mt-sm text-right h5){\n                                    Strong($address$:)\n                                }\n                                Div(col-md-7 mt-sm text-left h5){#entry_address#}\n                            }\n                            \n                            Div(row df f-valign){\n                                Div(col-md-5 mt-sm text-right h5){Strong($record_add_date$:)}\n                                Div(col-md-7 mt-sm text-left h5){DateTime(#entry_date_create#)}\n                            }\n                            \n                            Div(row df){\n                                Div(col-md-5 mt-sm text-right h5){Strong($buildings_use_class$:)}\n                                Div(col-md-7 mt-sm text-left h5){\n                                    EcosysParam(Name: buildings_use_class, Index: #entry_buildings_use_class#)\n                                }\n                            }\n                            \n                            Div(row df){\n                                Div(col-md-5 mt-sm text-right h5){Strong($land_nature$:)}\n                                Div(col-md-7 mt-sm text-left h5){\n                                    EcosysParam(Name: land_nature, Index: #entry_land_nature#)\n                                }\n                            }\n                        }\n                        DBFind(Name: \"a_land_registry_bridge\", Source: reg_bridge).Where(id=#LandId#).Vars(bridge)\n\t\t\t\t\t\tDiv(list-group-item){\n\t\t\t\t\t\t\tDiv(row df f-valign){\n                                Div(col-md-5 mt-sm text-right h5){\n                                    Strong(Current price:)\n                                }\n                                Div(col-md-6 mt-sm text-left h5){\n                                    Div(){\n                                        Span(#bridge_curr_price#)\n                                    }\n                                }\n\t\t\t\t\t\t\t}\n                        }\n\t\t\t\t\t\tIf(#isSold# == 0){\n\t\t\t\t\t\t\tIf(#bridge_owner# != #key_id#){\n\t\t\t\t\t\t\t\tDiv(list-group-item){\n\t\t\t\t\t\t\t\t\tDiv(row df f-valign){\n\t\t\t\t\t\t\t\t\t\tDiv(col-md-5 mt-lg text-right h5){Strong(Your amount:)}\n\t\t\t\t\t\t\t\t\t\tDiv(bid_class_small){ \n\t\t\t\t\t\t\t\t\t\t\tForm(panel-body input-group){\n\t\t\t\t\t\t\t\t\t\t\t\tInput(Class: form-control, Type: number, Name: newbid)\n\t\t\t\t\t\t\t\t\t\t\t\tDiv(input-group-btn){\n\t\t\t\t\t\t\t\t\t\t\t\t\tButton(Body: Bid, Contract: Bid, Params: \"Id=#LandId#,NewBid=Val(newbid)\", Class: btn btn-warning)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n                    }\n                }\n            }\n        }\n    }\n}"
        },
        {
            "Name": "a_land_page_view",
            "Conditions": "true",
            "Menu": "Applications",
            "Value": "If(GetVar(notific_val_int)){\n    SetVar(LandId, #notific_val_int#)\n}.Else{}\n\nIf(GetVar(notific_id)){}.Else{SetVar(notific_id,0)}\n\nSetVar(title,$land_record$)\n\nIf(#LandId#>0){}.Else{SetVar(LandId, 1)}\n\nIf(GetVar(LandId)){\n    DBFind(Name: land_registry, Source: src_entry).WhereId(#LandId#).Vars(entry)\n    DBFind(Name: land_registry_ownership, Source: src_land_ownership).Where(lend_object_id=#LandId#).Vars(ownership)\n    \n    DBFind(Name: members, Source: src_owner).Where(id=#ownership_owner_id#).Vars(owner)\n}\nSetTitle(#title#)\n\nDiv(content-wrapper){\n    Div(breadcrumb){\n        Div(){\n            LinkPage(Body:Market place,Page: a_reg_form)\n            Span(/).Style(margin-right: 10px; margin-left: 10px;)\n            LinkPage(Body:My profile,Page: a_my_profile_page)\n            Span(/).Style(margin-right: 10px; margin-left: 10px;)\n            Span(#title#, text-muted)\n        }\n    }\n    If(GetVar(LandId)){\n        Div(row df f-valign){\n            Div(col-sm-8 col-sm-offset-2 col-lg-6 col-lg-offset-3 mt-sm text-left){\n                Div(panel panel-default){\n                    Form(){\n                        Div(Class: list-group-item text-center){\n                            Span(Class: h3, Body: $land_record$ #GetVar(LandId))\t\n                        }\n                        Div(list-group-item){\n                            Map(MapType: hybrid, Hmap:300, Value: #entry_map_coords#)\n                        }\n                        Div(list-group-item){\n                            Div(row df f-valign){\n                                Div(col-md-5 mt-sm text-right h5){\n                                    Strong($area_size$)\n                                    (Span(m).(2).Style(vertical-align: super;font-size:small;)):\n                                }\n                                Div(col-md-7 mt-sm text-left h5){#entry_area#}\n                            }\n                            Div(row df f-valign){\n                                Div(col-md-5 mt-sm text-right h5){\n                                    Strong($address$:)\n                                }\n                                Div(col-md-7 mt-sm text-left h5){#entry_address#}\n                            }\n                            \n                            Div(row df f-valign){\n                                Div(col-md-5 mt-sm text-right h5){Strong($record_add_date$:)}\n                                Div(col-md-7 mt-sm text-left h5){DateTime(#entry_date_create#)}\n                            }\n                            \n                            Div(row df){\n                                Div(col-md-5 mt-sm text-right h5){Strong($buildings_use_class$:)}\n                                Div(col-md-7 mt-sm text-left h5){\n                                    EcosysParam(Name: buildings_use_class, Index: #entry_buildings_use_class#)\n                                }\n                            }\n                            \n                            Div(row df){\n                                Div(col-md-5 mt-sm text-right h5){Strong($land_nature$:)}\n                                Div(col-md-7 mt-sm text-left h5){\n                                    EcosysParam(Name: land_nature, Index: #entry_land_nature#)\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}"
        }
    ],
    "blocks": [
        {
            "Name": "reg_block",
            "Conditions": "true",
            "Value": "Div(content-wrapper){\n        Div(row){\n            Div(col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3){\n                Div(panel panel-primary){\n                    Div(panel-heading, Body: LangRes(Registration))\n                    Form(){\n                        Div(list-group-item){\n                            Div(row){\n                                Div(col-md-3 mt-sm text-right){\n                                    Span(Body: LangRes(Name))\n                                }\n                                Div(col-md-9 mc-sm text-left){\n                                    Input(Class: form-control, Type: text, Name: name)\n                                }\n                                Div(col-md-3 mt-sm text-right){\n                                    Span(Body: LangRes(Surname))\n                                }\n                                Div(col-md-9 mc-sm text-left){\n                                    Input(Class: form-control, Type: text, Name: surname)\n                                }\n                            }\n                        }\n                        \n                        Div(panel-footer clearfix){\n                            Div(pull-right){\n                                SetVar(founder, EcosysParam(\"founder_account\"))\n                                Button(Body: LangRes(Sign up), Class: btn btn-primary, Contract: RegUser, Params: \"Name=Val(name),Surname=Val(surname),Founder=#founder#\", Page: a_reg_form)\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }"
        },
        {
            "Name": "a_market_place_block",
            "Conditions": "true",
            "Value": "SetTitle(Market place)\n\nDiv(content-wrapper){\n    \n    Div(panel panel-primary data-sweet-alert){\n        Form(){\n\t\t\tDiv(list-group-item){\n\t\t\t\tDiv(row df f-valign){\n\t\t\t\t\tDiv(col-md-2 mt-sm text-center text-bold){On Sale}\n\t\t\t\t\tDiv(col-md-7 mc-sm text-left){}\n\t\t\t\t\tButton(Body:My profile,Page: a_my_profile_page, Class: btn btn-primary)\n\t\t\t\t}\n        }\n        Div(list-group-item){\n            DBFind(Name: a_land_registry_bridge, Source: bridge_registry).Where(state=1).Custom(action){\n                SetVar(isDeadline, 0)\n                SetVar(isClaimOwnership, 0)\n                SetVar(nowTime, Now())\n                SetVar(delta, Calculate(#nowTime#-#deadline2#))\n                If(#delta# > 0){\n                    SetVar(isDeadline, 1)\n                }\n                If(#bidder#==#key_id#){\n                    If(#isDeadline#){\n                        SetVar(isClaimOwnership, 1)\n                    }\n                }\n                If(#bidder#==0){\n                   If(#owner#==#key_id#){\n                        If(#isDeadline#){\n                            SetVar(isClaimOwnership, 1)\n                        }               \n                   } \n                }\n                Span(){\n                    Button(Page: a_land_page, PageParams: \"LandId=#id#, isSold=#isDeadline#\", Class: btn btn-warning, Body: Open info)\n                }.Style(margin-left: 5px; margin-right: 5px;)\n                If(#isClaimOwnership#){\n                    Span(){\n                        DBFind(\"land_registry\", lr).Where(\"id=#master_id#\").Vars(land)\n                        Button(Contract: ClaimOwnership, Params: \"Id=#id#,Coords=#land_map_coords#\", Class: btn btn-danger, Body: Claim Ownership)\n                    }\n                }    \n            }.Custom(icon){\n                If(#owner#==#key_id#){\n                    Span(âœ“)\n                }\n            }\n            Table(Source: bridge_registry, Columns: \" =icon, Area=area,Address=address,Price=curr_price,=action\")\n        }\n        Div(panel-footer){\n            Div(clearfix){\n                Form(pull-right){\n\n                }\n                }\n            }\n        }\n    }\n}"
        },
        {
            "Name": "a_land_registry_block",
            "Conditions": "true",
            "Value": "Div(content-wrapper){\n    Div(panel panel-primary data-sweet-alert){\n\t\tForm(){\n\t\t\tDiv(list-group-item){\n\t\t\t\tDiv(row df f-valign){\n\t\t\t\t\tDiv(col-md-2 mt-sm text-center text-bold){$land_use$}\n\t\t\t\t\tDiv(col-md-7 mc-sm text-left){\n\t\t\t\t\t\tDiv(input-group){\n\t\t\t\t\t\t\tEcosysParam(Name: land_use, Source: src_land_use)\n\t\t\t\t\t\t\tSelect(Name: LandUseSelect, Source: src_land_use, Class: form-control, NameColumn: name, ValueColumn: id, Value: #str_search#)\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tDiv(input-group-btn){\n\t\t\t\t\t\t\t\tButton(Page: #this#, PageParams: \"str_search=Val(LandUseSelect),isSearch=1,isOrder=#isOrder#\", Class: btn btn-default fa fa-search)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tDiv(col-md-3 mc-sm text-center){\n\t\t\t\t\t\tDiv(btn-group){\n\t\t\t\t\t\t\tSpan(){\n\t\t\t\t\t\t\t\tIf(#isOrder#==1){\n\t\t\t\t\t\t\t\t\tButton(Page: #this#, Class: btn bg-gray, PageParams: \"isOrder=3,isSearch=#isSearch#,str_search=Val(LandUseSelect)\", Body: Em(Class:fa fa-sort-numeric-asc) $price$)\n\t\t\t\t\t\t\t\t}.ElseIf(#isOrder#==3){\n\t\t\t\t\t\t\t\t\tButton(Page: #this#, Class: btn bg-gray, PageParams: \"isOrder=1,isSearch=#isSearch#,str_search=Val(LandUseSelect)\", Body: Em(Class:fa fa-sort-numeric-desc) $price$)\n\t\t\t\t\t\t\t\t}.Else{\n\t\t\t\t\t\t\t\t\tButton(Page: #this#, Class: btn bg-gray-lighter,PageParams: \"isOrder=1,isSearch=#isSearch#,str_search=Val(LandUseSelect)\", Body: $price$)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}.Style(margin-left: 5px; margin-right: 5px;)\n\t\t\t\t\t\t\tSpan(){\n\t\t\t\t\t\t\t\tIf(#isOrder#==2){\n\t\t\t\t\t\t\t\t\tButton(Page: #this#, Class: btn bg-gray, PageParams: \"isOrder=4,isSearch=#isSearch#,str_search=Val(LandUseSelect)\", Body: Em(Class:fa fa-sort-numeric-asc) $area_size$)\n\t\t\t\t\t\t\t\t}.ElseIf(#isOrder#==4){\n\t\t\t\t\t\t\t\t\tButton(Page: #this#, Class: btn bg-gray, PageParams: \"isOrder=2,isSearch=#isSearch#,str_search=Val(LandUseSelect)\", Body: Em(Class:fa fa-sort-numeric-desc) $area_size$)\n\t\t\t\t\t\t\t\t}.Else{\n\t\t\t\t\t\t\t\t\tButton(Page: #this#, Class: btn bg-gray-lighter, PageParams: \"isOrder=4,isSearch=#isSearch#,str_search=Val(LandUseSelect)\", Body: $area_size$)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}.Style(margin-left: 5px; margin-right: 5px;)\n\t\t\t\t\t\t}\n\t\t\t\t\t}.Style(display:flex;)\n\t\t\t\t}\n\t\t\t}\n\t\t\tDiv(list-group-item){\n\t\t\t\tTable(Source:src_land_registry, Columns: \"ID=_id,$owner$=_owner,$area_size$=_area,$address$=_address,$consideration_value$(INR)=_cons,$legal_status$=_legal,$encumbrance_certificate$=_encumberance,=_admin\")\n\t\t\t\tIf(#isSearch#==1){\n\t\t\t\t\tForm(text-center){\n\t\t\t\t\t\tButton(Page: #this#, PageParams:\"isSearch=0\", Class: btn btn-primary btn-oval){\n\t\t\t\t\t\t\tLangRes(view_all)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tDiv(panel-footer){\n\t\t\t\tDiv(clearfix){\n\t\t\t\t\tForm(pull-right){\n\t\t\t\t\t\tButton(Page: land_registry_add, Class: btn btn-primary, Body: $add$)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n    }\n}"
        }
    ],
    "menus": [
        {
            "Name": "Applications",
            "Conditions": "ContractAccess(\"@1EditMenu\")",
            "Value": "MenuItem(Title:$referendum$, Page:referendums_list, Icon:\"fa fa-gavel\")\nMenuItem(Title: $land_records$, Page: land_registry_records,Icon: \"fa icon-home\")\nMenuItem(\n    Icon: \"icon-cloud-download\",\n    Page: \"a_reg_form\",\n    Title: \"Market place\"\n)"
        }
    ],
    "parameters": [
        {
            "Name": "stylesheet",
            "Value": "body {\n\t\t  /* You can define your custom styles here or create custom CSS rules */\n\t\t}\n\n.bid_class_small{\n\twidth: 200px;\n\theight: 170px;\n\tmargin-left: 22%;\n}",
            "Conditions": "ContractConditions(\"MainCondition\")"
        }
    ],
    "languages": [],
    "contracts": [
        {
            "Name": "TransferOwnership",
            "Value": "contract TransferOwnership {\n    data {\n        master_id int\n        curr_price money\n    }\n\n    conditions {\n\n    }\n\n    action {\n        DBUpdate(\"land_registry\", $master_id, \"owner_id,price\", $key_id, $curr_price) // update land_registry\n    }\n}",
            "Conditions": "true"
        },
        {
            "Name": "ClaimOwnership",
            "Value": "contract ClaimOwnership {\n    data {\n        Id int\n        Coords string\n    }\n\n    conditions {\n    }\n\n    action {\n        var res map\n        res = DBFind(\"a_land_registry_bridge\").Columns(\"master_id,bidder,curr_price,address\").WhereId($Id).Row()\n        $bidder = res[\"bidder\"]\n        $curr_price = res[\"curr_price\"]\n        $owner = res[\"owner\"]\n        $address = res[\"address\"]\n        $master_id = res[\"master_id\"]\n\n        if $key_id == $owner {\n            DBUpdate(\"a_land_registry_bridge\", $Id, \"owner,state\", $key_id, 0) // owner claims his own property\n        } else {\n            //MoneyTransfer(\"Recipient,Amount,Comment\", $owner, $curr_price, $address) // transfer money\n            \n            DBUpdate(\"a_land_registry_bridge\", $Id, \"owner,state\", $key_id, 0) // sold condition\n            //land_registry_Delete(\"LandId\", $Id)\n            //land_registry_Add(\"OwnerId,Coords,BuildingsUseClass,LandNature\", $key_id, $Coords, 1, 1)\n            TransferOwnership(\"master_id,curr_price\", $Id, $curr_price) // update land_registry\n        }\n    }\n}",
            "Conditions": "true"
        },
        {
            "Name": "RegUser",
            "Value": "contract RegUser {\n    data {\n        Name string\n        Surname string\n    }\n\n    conditions {}\n\n    action {\n        DBInsert(\"a_users\", \"key_id, name, surname, validated\", $key_id, $Name, $Surname, 0)\n    }\n}",
            "Conditions": "true"
        },
        {
            "Name": "RegLand",
            "Value": "contract RegLand {\n    data {\n        Id int\n        Price money\n    }\n\n    conditions {\n\n    }\n\n    action {\n        var res map\n        var owner, area int\n        var addr string\n        var delta int\n        res = DBFind(\"land_registry\").WhereId($Id).Row()\n        owner = res[\"owner_id\"]\n        addr = res[\"address\"]\n        area = res[\"area\"]\n        delta = 120\n        DBInsert(\"a_land_registry_bridge\", \"master_id,owner,state,bidder,address,deadline2,curr_price,area\", $Id, owner, 1, 0, addr, $block_time + delta, $Price, area)\n    }\n}",
            "Conditions": "true"
        },
        {
            "Name": "NotificationNewUser",
            "Value": "contract NotificationNewUser {\n    data {\n        MemberId int\n        SomeText string\n        Id int\n    }\n    \n    conditions {}\n    \n    action {\n        var icon, header, body, page, params string\n        icon = \"fa-bell\"\n        header = \"You have got a message\"\n        body = $SomeText\n        page = \"demo_page_message\"\n        params = Sprintf(\"SomeText=%v,Id=%v\", $SomeText, $Id)\n\n        Notifications_Single_Send(\"member_id,icon_name,text_header,text_body,page_name,params_val\", $MemberId, icon, header, body, page, params)\n    }\n}",
            "Conditions": "true"
        },
        {
            "Name": "Bid",
            "Value": "contract Bid {\n    data {\n        Id int\n        NewBid money\n    }\n\n    conditions {}\n\n    action {\n        var res map \n        var bidder int\n        res = DBFind(\"a_land_registry_bridge\").Columns(\"bidder\").WhereId($Id).Row()\n        bidder = res[\"bidder\"]\n       // NotificationNewBid(\"MemberId\", bidder)\n        DBUpdate(\"a_land_registry_bridge\", $Id, \"curr_price,bidder\", $NewBid, $key_id)\n    }\n}",
            "Conditions": "true"
        },
        {
            "Name": "NotificationNewBid",
            "Value": "contract NotificationNewBid {\n    data {\n        MemberId int\n    }\n    \n    conditions {}\n    \n    action {\n        var icon, header, body, page, params string\n        icon = \"fa-bell\"\n        header = \"You have got a message\"\n        body = \"\"\n        page = \"demo_page_message\"\n        params = Sprintf(\"SomeText=%v\", \"Your bid was overbidden.\")\n\n        Notifications_Single_Send(\"member_id,icon_name,text_header,text_body,page_name,params_val\", $MemberId, icon, header, body, page, params)\n    }\n}",
            "Conditions": "true"
        }
    ],
    "tables": [
        {
            "Name": "a_land_registry_bridge",
            "Columns": "[{\"name\":\"bidder\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"address\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"deadline\",\"type\":\"datetime\",\"conditions\":\"true\"},{\"name\":\"master_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"area\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"owner\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"state\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"deadline2\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"curr_price\",\"type\":\"money\",\"conditions\":\"true\"}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}"
        },
        {
            "Name": "a_users",
            "Columns": "[{\"name\":\"name\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"key_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"surname\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"validated\",\"type\":\"number\",\"conditions\":\"true\"}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}"
        }
    ],
    "data": []
}